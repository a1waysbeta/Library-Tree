<!DOCTYPE html>
	<html>
	<head>

	<meta http-equiv="x-ua-compatible" content="IE=8" />
	<link rel="stylesheet" type="text/css" href="styles10.css">
	<style type="text/css">

	body, html {height:100%; margin:0;}

	.tablink {background-color:#e5e5e5; overflow:hidden; font:1em Microsoft Yahei UI;}
	.tablink a {margin:0; background-color:#555; color:white; text-align:center; float:left; border:none; border-bottom:1px solid #d0d0d0; outline:none; cursor:pointer; padding:0.31em 2px; width:13%;}
	.tablink a:hover {padding:0.31em 2px; background-color:#777;}
	.tablink a:focus {padding:0.31em 2px; background-color:#777;}
	.tablink a:focus a:hover {padding:0.31em 2px; background-color:#777;}
	.tabcontent {display:none; padding:1px; overflow:hidden;} /* Regorxxx <- Fix global overflow problems -> */

	input[type="checkbox"] {vertical-align:middle; position:relative; width:17px; height:15px; border:0; padding:2px 1px; margin:5px 0;}
	input[type="checkbox"]:focus {border:1px solid #0078D7; padding:1px 0;}
	input[type="checkbox"]:hover:focus {border:1px solid #0078D7; padding:1px 0;}
	input[type="checkbox"]:hover {border:1px solid #000000; padding:1px 0;}
	input[readonly] {background-color:#E1E1E1;}
	.checkbox_label {padding:0; margin:0; vertical-align:middle; margin-left:0.31em;}

	input[type="radio"] {vertical-align:middle; position:relative; width:17px; height:15px; border:0; padding:2px 1px; margin:5px 0;}
	input[type="radio"]:focus {border:1px solid #0078D7; padding:1px 0;}
	input[type="radio"]:hover:focus {border:1px solid #0078D7; padding:1px 0;}
	input[type="radio"]:hover {border:1px solid #000000; padding:1px 0;}

	.info1 {padding:0.7em 0 1.57em 0;}
	.info2 {padding:0.7em 0 0;}
	.info3 {margin:0 2% 0 0; padding:0;}
	.info4 {padding:0 0 0.31em;}
	.info4600 {padding:0 0 0.31em; font-weight:600;}
	.info5 {padding:0.7em 0 0.31em;}
	.info5600 {padding:0.7em 0 0.31em; font-weight:600;}
	.info6 {padding:1.25em 0 0.7em;}
	.info7 {padding:1em 0 0 0;}
	.info8 {padding:1.25em 0 0;}
	.info9 {padding:1.25em 20% 0 0;}

	.info1, .info3,  .info2, .info3, .info4, info4600, .info5, .info5600, .info6, .info7, .info8, .info9 {
		word-wrap:break-word; white-space:pre-wrap;
	}

	.input_cnt1 {padding-top:0.31em; padding-bottom:0.31em;}
	.input_cnt2 {padding-top:0.7em; padding-bottom:0.31em;}
	.input_cnt3 {padding-top:0.7em;}
	.input_cnt4 {padding-bottom:0.44em;}
	.input_cnt5 {margin:5px 0}
	.input3 {width:3em;}
	.input7 {width:7.5%;}
	.input15 {width:15%;}
	.input21 {display:inline-block; vertical-align:middle; width:21%; margin-left:2%; margin-right:0;}
	.input35 {display:inline-block; vertical-align:middle; width:35%; margin-bottom:0.31em;}
	.input40 {display:inline-block; vertical-align:middle; width:40%; margin-left:5%;}
	.input70 {display:inline-block; vertical-align:middle; width:70%;}
	.input71 {display:inline-block; vertical-align:middle; width:71%; margin-left:2%;}
	.input75 {display:block; width:75%;}
	.input98 {display:inline-block; vertical-align:middle; width:98%;}
	.input99 {display:inline-block; vertical-align:middle; width:98%; border:none !important; background:none;}
	.inputFull {display:block; width:35%;}
	.inp_label1 {display:block; padding-top:0em; margin:0.31em 0;}
	.inp_label2 {padding-left:0.46em;}

	.btn_cnt {padding:0.7em 1em; position:absolute; bottom:0; right:0; left:0; z-index: 2;} /* Regorxxx <- Fix global overflow problems -> */
	#btn_cnt_right {background:#e5e5e5; border-top:1px solid #d0d0d0; text-align:right;}
	#btn_cnt_left {text-align:left;}
	#btn_cnt_center {text-align:center;}
	#mainMargin {margin: 0 2%}

	.alignLeftH {width:23%; margin-left:4%; padding:1.01em 0 0.31em; float:left;}
	.alignRightH {padding:1.01em 0 0.31em; float:left;}
	.div_text1 {padding:1.01em 0 0.31em;}
	.div_text2 {padding:0.7em 0 0.31em;}
	.div_text3 {padding:1.01em 0 0.7em 0;}
	.div_text4 {padding:1.25em 0 0.7em;}
	.div_text6 {padding:1.25em 0 0.31em;}
	.div_text7 {padding:1.01em 0 0;}
	.alignLeftH, .alignRightH, .div_text1, .div_text2, .div_text3, .div_text4, .div_text6, .div_text7 {
		font:bold 1em Microsoft Yahei UI; color:#0066cc; word-wrap:break-word; white-space:pre-wrap;
	}

	.dropbtn {white-space:nowrap; width:100%; background-color:#3e8e41; color:white; text-decoration:none; padding:0.13em 5px; border:none; cursor:pointer;}
	.dropbtnLight {white-space:nowrap; width:100%; color:black; text-decoration:none; padding:0.13em 5px; border:none; cursor:pointer;}
	.dropbtn:after {font-family: FontAwesome; content: "\f107"; padding-left:0.5em; padding-right:0.19em;}
	.dropbtnLight:after {font-family: FontAwesome; content: "\f107"; padding-left:0.5em; padding-right:0.19em;}
	.dropdown {margin-top: 10px; position:relative; display:inline-block;}
	.dropdown-content {display:none; position:absolute; background-color:#f9f9f9; min-width:10em; white-space:nowrap; box-shadow:0 8px 1.01em 0 rgba(0,0,0,0.2); z-index:1;}
	.dropdown-content a {padding:0.13em 5px; color:black; text-decoration:none; display:block;}
	.dropdown-content a:hover {background-color:#f1f1f1;}
	.dropdown .dropdown-content {display:none;}
	.dropdown:hover .dropbtn {background-color:#4CAF50;}
	.dropdown:hover .dropbtnLight {background-color:Gainsboro;}

	.dropArrow {display:inline-block; font-family: FontAwesome; padding-left:0.5em; padding-right:0.19em;}

	.pad {height:1.57em;}
	.stub {border:0; vertical-align:middle; margin-bottom:0.2em;}

	table {width: 100%; text-align:center; border-collapse:collapse; border:1px solid Gainsboro; empty-cells:show;}
	th {font:bold 95% Microsoft Yahei UI; color:green; border:0;}
	td {padding-right:5px; border:0;}
	tr {border:0;}
	.table77 {width:76.5%;}
	.table98 {line-height:1.62em; text-align:left; vertical-align:top; border:1px solid Gainsboro;}

	.column25 {width:25%;}
	.column27 {width:27%;}
	.column29 {width:29%;}
	.column32 {width:32%;}
	.column33 {width:33%;}
	.column38 {width:38%;}
	.column41 {width:41%;}
	.column50 {width:50%;}
	.column61 {width:61%;}
	.column70 {width:66%;}

	.column25, .column27, .column29, .column32, .column33, .column38, .column41, .column50, .column61, .column70 {
		margin:0; padding:0; float:left;
	}

	.row:after {content:""; display:table; clear:both;}

	/* Regorxxx <- Add tooltip to links */
	.tooltip {
		position: relative;
		display: inline-block;
		border-bottom: 1px dotted rgb(0, 0, 0);
	}

	.tooltip .tooltiptext {
		visibility: hidden;
		width: 150%;
		background-color: #555;
		color: #fff;
		/*text-align: center;*/
		text-align: left;  /* 改为左对齐 */
		border-radius: 6px;
		padding: 6px 6px;
		position: absolute;
		z-index: 1;
		bottom: 125%;
		left: 0%;
		opacity: 0;
		line-height: 1.4;
		transition: opacity 0.3s;
	}

	.tooltip .tooltiptext::after {
		content: "";
		position: absolute;
		top: 100%;
		left: 50%;
		margin-left: -5px;
		border-width: 5px;
		border-style: solid;
		border-color: #555 transparent transparent transparent;
	}

	.tooltip:hover .tooltiptext {
		visibility: visible;
		filter: alpha(opacity=85);
		opacity: 0.85;
	}
	/* Regorxxx -> */

	ul {margin-top:0; margin-bottom:0;}

	</style>
	</head>
	<body>
		<div style="clear:both;"></div>
		<div id="tablink" class="tablink">
			<a onclick="openPage('views', this, 'red')" id="viewsCfg">查看</a>
			<a onclick="openPage('filters', this, 'green')" id="filtersCfg">过滤</a>
			<a onclick="openPage('behaviour', this, 'orange')" id="behaviourCfg">行为</a>
			 <!-- Regorxxx New Tabs. New statistics -->
			<a onclick="openPage('search', this, 'blue')" id="searchCfg">搜索</a>
			<a onclick="openPage('display', this, 'red')" id="displayCfg">显示</a>
			<a onclick="openPage('statistics', this, 'red')" id="statisticsCfg">播放统计</a>
			<a onclick="openPage('albumArt', this, 'green')" id="albumArtCfg">专辑封面</a>
			<a onclick="openPage('custom', this, 'orange')" id="customCfg">自定义</a>
			<a onclick="openPage('advanced', this, 'blue')" id="advancedCfg">高级</a>
			<!-- Regorxxx -->
		</div>
		<!-- Regorxxx Code cleanup -->
		<div id="mainMargin">
			<div style="clear:both;"></div>
			<div id='views' class="tabcontent">
				<span class="alignLeftH">名称</span>
				<span class="alignRightH">模板</span>
				<div style="clear:both;"></div>
				<div id="view"></div>
				<div class="info1">选中的项目将显示在菜单中。如需添加分隔符，只需将名称设为 “分隔符” 或 “separator” 并将模板设置为任意非空字符串即可。</div>
				<p "><a class="tooltip" id="tfReference" href="https://wiki.hydrogenaud.io/index.php?title=Foobar2000:Title_Formatting_Reference" target="_blank" oncontextmenu="copyToClipboardId('tfReference')">标题格式参考<span class="tooltiptext">左键：IE 打开<br>右键：复制链接</span></a></p>
				<!-- Regorxxx Text cleanup -->
				<button id="syntax_button" name="syntax_button" style="margin-left:0px;" type="button">显示多面板模式（分面）和扩展语法帮助</button><div id="syntax_help" style="display: none;">
				<!-- Regorxxx -->
				<div class="info5"><b>多面板模式（分面）</b></div>
				<div class="info5">支持创建多级关联面板，每级可独立设置为树状、专辑封面或分面视图，实现数据层层筛选。例如，设置三级面板布局的分面视图：流派|艺术家|专辑。</div>
				<div class="info5">配置步骤：<ul><li>在布局中插入 3 个 蜘蛛猴 (Spider Monkey) / JS 分离器 (JSplitter) 面板，每个面板加载 Library Tree 包</li><li>对各面板执行快速设置，选择 “分面” 模式</li><li>分别设置查看方式：将一级面板设为 “流派”，二级面板设为 “艺术家”，三级面板设为 “专辑” *</li><li>按 Shift + Windows + 右键打开 “配置面板...”，在顶部设置 “面板名称”：一级命名为 “流派”，二级命名为 “艺术家”，三级命名为 “专辑”</li><li>二级面板：设置 > 来源 > 面板来源，输入上级面板名称 “流派”（区分大小写）</li><li>三级面板：设置 > 来源 > 面板来源，输入上级面板名称 “艺术家”（区分大小写）</li><li>查看 “高级” 选项卡，了解有关链式来源通知的更多信息。旧版行为下三级面板需设置 “流派|艺术家” 复合来源</li></ul>优化建议：<ul><li>二级面板可切换为专辑封面视图（右键菜单），类型设为 “艺术家”，推荐圆形样式</li><li>三级面板可切换为专辑封面视图，类型设为 “封面”</li><li>根据需求调整设置 > 专辑封面 > 分组级别</li><li>为二、三级面板隐藏顶部工具栏（搜索框、过滤与设置按钮）</li><li>建议启用：退出时和搜索前记住状态、过滤器 - 记忆滚动条位置</li></ul><br>* 默认的专辑查看方式作为树状视图效果更好；对于分面视图，以下内容更好：<input class="input99" value="查看按专辑 // $if2(%album%,εXtra)|%album artist%|[[%discnumber%.]%tracknumber%. ][%track artist% - ]%title%"/><br><br><b>额外的查看方式模板，兼容分面和树状视图</b><br><br><input class="input99" value="音轨 // [%tracknumber%. ]%title%"/><input class="input99" value="标题 // %title%"/><input class="input99" value="文件夹 // $directory(%path%)"/><input class="input99" value="文件名 // %filename%"/><input class="input99" value="文件名，包括后缀名 // %filename_ext%"/><input class="input99" value="艺术家首字母 // $cut(%artist%,1)|%artist%|$if2(%album%,εXtra)|[[%discnumber%.]%tracknumber%. ][%track artist% - ]%title%"/><input class="input99" value="专辑艺术家首字母 // $cut(%album artist%,1)|%album artist%|$if2(%album%,εXtra)|[[%discnumber%.]%tracknumber%. ][%track artist% - ]%title%"/><input class="input99" value="日期 - 专辑 // [$year(%date%) - ]$if2(%album%,εXtra)|%album artist%|[[%discnumber%.]%tracknumber%. ][%track artist% - ]%title%"/><br><br><b>排序</b><br>分面基于树状视图的顶层结构实现分类，其余层级用于排序。常规需求已可满足，如需高级排序，可通过播放列表排序实现，例如：<br><br><input class="input99" value="%album artist%  $if2(%album%,εXtra)  [[%discnumber%.]%tracknumber%. ][%track artist% - ]%title%"/><input class="input99" value="%artist%  $if2(%album%,εXtra)  [[%discnumber%.]%tracknumber%. ][%track artist% - ]%title%"></div>
				<div class="info5"><b>扩展语法</b></div>
				<table id="syntax" class="table98">
					<br>
					<colgroup>
						<col span="1" style="width:20%">
					</colgroup>
				</table>
				<div class="info8" style="color:#0066cc;"><b>$colour{正常,悬停,选中}</b></div>
				<div class="info7">为文本行中的不同部分设置独立颜色（所有颜色参数均为可选，未定义项将自动采用默认值）。颜色效果从 $colour 代码位置开始生效，直至遇到下一个 $colour 代码、分隔符（查看模板中的 | 或 &#166）或重置代码 $colour{} 为止。<br><br>“正常”、“悬停” 与 “选中” 状态的颜色可使用 RGB 值（r-g-b）或亮度调节符号（如 -、++ 等）进行设置，例如：<br>$colour{r-g-b,r-g-b,r-g-b} 或 $colour{-,++,+++}</div>
				<div class="info7" style="color:#0066cc;">注意：悬停效果需在 “显示” 选项卡中启用 “悬停效果（前景）：高亮文本” 方可生效。</div>
				<div class="info7">亮度调节符号说明：<br>- 稍暗文本<br>-- 较暗文本<br>--- 最暗文本<br>+ 稍亮文本<br>++ 较亮文本<br>+++ 最亮文本<br><br>RGB 格式与亮度调节符号可在同一 $colour{} 函数中混合使用。<br><br>语法示例：<br>$colour{} 重置所有颜色为默认值。<br>$colour{255-0-0} 将正常文本设为红色；悬停与选中状态因未定义而保持默认。<br>$colour{,,+++} 将选中文本设为最亮；正常与悬停状态因未定义而保持默认。<br>$colour{0-255-0,++} 将正常文本设为绿色，悬停文本设为较亮；选中状态因未定义而保持默认。<br>$colour{255-0-0,0-255-0,0-255-255} 分别将正常、悬停和选中文本设为红色、绿色与青色。<br><br>模板示例：</div>
				<div class="input_cnt3"><input class="input99" style="font:0.87em Segoe UI;" value="$colour{-}%artist%[$colour{+} - %album%][$colour{96-127-127} - '['%date%']'][$colour{111-132-138} - %genre%]$colour{--}|[$colour{--,++,0-192-192}%tracknumber%. ]$colour{-,++,0-228-228}%title%"/></div>
				<div class="info7">项目计数属于特殊情况，不参与查看模板的文本构建。<br>右对齐项：独立渲染，不受 $colour 代码控制，默认采用淡化显示。<br>行尾颜色：受 $colour 代码影响，可使用 $colour{} 重置或设置新颜色（上例中使用了 $colour{--}）。</div>
				<div class="info7" style="color:#0066cc;"><b>字符串处理注意事项</b></div>
				<div class="info7">$nodisplay 和 $colour 通常不应放在会删除字符串片段或按位置插入子串的字符串处理函数内部。请始终将它们置于字符串函数之前，例如：<br><br><b>✓ 推荐用法</b><br>$colour{255-0-0}$substr(str,from,to)<br>$colour{0-255-0}$swapbranchprefix{%&ltartist&gt%}<br><br><b>✗ 不推荐用法</b><br>$substr($colour{255-0-0}str,from,to)<br>$swapbranchprefix{$colour{0-255-0}%&ltartist&gt%}</div>
				<div><br></div>
			</div>
		</div>
		<!-- Regorxxx -->
		<div style="clear:both;"></div>
		<div id='filters' class="tabcontent">
			<span class="alignLeftH">名称</span>
			<span class="alignRightH">查询</span>
			<div style="clear:both;"></div>
			<div id="filter"></div>
			<div class="info1">选中的项目将显示在菜单中。如需添加分隔符，只需将名称设为 “分隔符” 或 “separator” 并将查询设置为任意非空字符串即可。</div>
			<!-- Regorxxx Add help to filter tab -->
			<p "><a class="tooltip" id="tfReference2" href="https://wiki.hydrogenaud.io/index.php?title=Foobar2000:Title_Formatting_Reference" target="_blank" oncontextmenu="copyToClipboardId('tfReference2')">标题格式参考<span class="tooltiptext">左键：IE 打开<br>右键：复制链接</span></a></p>
			<button id="syntaxFilter_button" name="syntaxFilter_button" style="margin-left:0px;" type="button">扩展语法帮助</button>
			<div id="syntaxFilter_help" style="display: none;">
				<div class="info5"><b>扩展语法</b></div>
				<table id="syntaxFilter" class="table98">
				<br>
				<colgroup>
					<col span="1" style="width:20%">
				</colgroup>
				</table>
				<div><br></div>
			</div>
			<!-- Regorxxx -->
		</div>
		<div style="clear:both;"></div>
		<div id="btn_cnt_right" class="btn_cnt">
			<button id="btn_ok" >确定</button>
			<button class="button_apply" id="btn_apply">应用</button>
			<button id="btn_cancel">取消</button>
		</div>
		<div id="btn_cnt_left" class="btn_cnt">
			<button id="btn_reset" >重置全部</button>
			<button id="btn_resetPage" >重置页面</button>
		</div>
		<div id="btn_cnt_center" class="btn_cnt">
			<button id="btn_add" >新建</button>
			<button id="btn_up" >上移</button>
			<button id="btn_down" >下移</button>
			<button id="btn_delete" >删除</button>
		</div>

		<div id="behaviour" class="tabcontent">
			<!-- Regorxxx Code cleanup -->
			<div class="row">
				<div class="column38" style="margin-right:1%;">
					<div class="div_text1">模式</div>
					<div id="actionType"></div>
					<div style="display:inline-block; padding-top:0.7em;"><a id="mode_help" href="#" onclick="showHelp('mode_text');return false;">模式帮助</a></div>
					<div id="mode_text" style="display:none; padding:0.7em; background-color:Gainsboro;">
						<div class="info4600"><b>默认</b></div>
						<div class="info4">&#x2022; 自定义按键配置</div>
						<div class="info4600"><b>浏览</b></div>
						<div class="info4">&#x2022; 继续播放播放列表<br>&#x2022; 便于浏览曲目列表，例如在专辑封面或分面模式下<br>&#x2022; 最适合在关闭 “播放跟随光标” 且播放列表可见的情况下使用<br>&#x2022; 双击状态栏等位置显示正在播放项目<br>&#x2022; 如果启用，则设置红色显示的预设</div>
						<div class="info4600"><b>播放</b></div>
						<div class="info4">&#x2022; 从播放队列播放<br>&#x2022; 不涉及播放列表<br>&#x2022; 可选择显示播放队列和正在播放指示器<br>&#x2022; 最大队列大小：256（foobar2000 限制）<br>&#x2022; 如果启用，则设置红色显示的预设</div>
					</div>
					<span class="info5600">左键单击：</span>
					<span class="dropdown" style="margin-top:0"><a id="click_dropdown" class="dropbtn" href="#" onclick="toggle('click');"></a>
						<span id="click" class="dropdown-content"></span>
					</span>
					<span class="info5600">左键双击：</span>
					<span class="dropdown" style="margin-top:0;"><a id="dblClick_dropdown" class="dropbtn" href="#" onclick="toggle('dblClick');"></a>
						<span id="dblClick" class="dropdown-content"></span>
					</span>
					<span class="info5600">中键单击：</span>
					<span class="dropdown" style="margin-top:0"><a id="mbtnClick_dropdown" class="dropbtn" href="#" onclick="toggle('mbtnClick');"></a>
						<span id="mbtnClick" class="dropdown-content"></span>
					</span>
					<span class="info5600">Alt + 左键单击：</span>
					<span class="dropdown" style="margin-top:0"><a id="altClick_dropdown" class="dropbtn" href="#" onclick="toggle('altClick');"></a>
						<span id="altClick" class="dropdown-content"></span>
					</span>
					<span class="info5600">按键操作：</span>
					<span class="dropdown" style="margin-top:0"><a id="keystroke_dropdown" class="dropbtn" href="#" onclick="toggle('keystroke');"></a>
						<span id="keystroke" class="dropdown-content"></span>
					</span>
					<div class="div_text6">滚动</div>
					<span class="info3">滚动条：</span>
					<span style="margin:0.31em 0 0.31em;" class="dropdown"><a id="sbarShow_dropdown" class="dropbtn" href="#" onclick="toggle('sbarShow');"></a>
						<span id="sbarShow" class="dropdown-content"></span>
					</span>
					<span style="margin:0 0 0.31em;" class="dropdown"><a id="sbarType_dropdown" class="dropbtn" href="#" onclick="toggle('sbarType');"></a>
						<span id="sbarType" class="dropdown-content"></span>
					</span>
					<span style="margin:0 0 0.31em;" id="sbar_col_dropdown" class="dropdown"><a id="sbarCol_dropdown" class="dropbtn" href="#" onclick="toggle('sbarCol');"></a>
						<span id="sbarCol" class="dropdown-content"></span>
					</span>
					<span style="margin:0 0 0.31em;" id="sbar_icon_dropdown" class="dropdown"><a id="sbarIcon_dropdown" class="dropbtn" href="#" onclick="toggle('sbarIcon');"></a>
						<span id="sbarIcon" class="dropdown-content"></span>
					</span>
					<div id="scrolling"></div>
				</div>

				<div class="column29">
					<!-- Regorxxx Search settings to search tab -->
					<div class="div_text2">树状列表</div>
					<div id="expand"></div>
					<div id="expandLimit"></div>
					<div class="div_text2">记住状态</div>
					<div id="remember"></div>
					<div class="div_text6">选择</div>
					<div id="selection"></div>
					<div class="div_text1">跟随选择</div>
					<div id="followCurrent"></div>
					<div class="info9"><a id="setSize" style="text-decoration:none;" href="#" onclick="setWindowSize();return false;">重置窗口默认大小</a></div>
					<div class="div_text1">查看方式排序</div>
					<span class="info5600">按文件夹结构查看时：</span>
					 <!-- View by Folder structure sorting. Custom sorting for standard views -->
					<span class="dropdown" style="margin-top:0"><a id="folderSorting_dropdown" class="dropbtn" href="#" onclick="toggle('folderSorting');"></a>
						<span id="folderSorting" class="dropdown-content"></span>
					</span>
					<div style="margin:0.31em 0 0;" id="folderSortingFb"></div>
					<div style="margin:0.31em 0 0;" id="folderSortingTrans"></div>
					<span class="info5600">按标题格式查看时：</span>
					<span class="dropdown" style="margin-top:0"><a id="viewSorting_dropdown" class="dropbtn" href="#" onclick="toggle('viewSorting');"></a>
						<span id="viewSorting" class="dropdown-content"></span>
					</span>
					<div style="margin:0.31em 0 0;" id="viewSortingTrans"></div>
				</div>

				<div class="column32">
					<div class="div_text1">播放列表</div>
					<div id="playlist"></div>
					<div class="info4">使用 %view_name% 可获取当前查看方式名称</div>
					<div id="playlistSort"></div>
					<div class="div_text4">发送到播放列表的目标播放列表：</div>
					<div id="targetPlaylist"></div>
					<!-- Regorxxx Send to playlist & select -->
					<div class="div_text4">播放列表选择行为：</div>
					<div id="selectAddedToPls"></div>
					<div style="display:inline-block; padding-top:0.7em;"><a id="mode_help" href="#" onclick="showHelp('plsSel_text');return false;">播放列表选择帮助</a></div>
					<div id="plsSel_text" style="display:none; padding:0.7em; background-color:Gainsboro;">
						<div class="info4">默认启用选择同步：发送选中内容至播放列表并高亮显示（其他监听选择变更的面板或组件将自动更新）<br><br>禁用此选项将恢复旧版行为：仅发送项目数据而不进行实际选择操作</div>
					</div>
					<!-- Regorxxx -->
					<!-- Regorxxx Top tracks -->
					<div class="div_text4">高评级音轨选择：</div>
					<div id="topTracksFilter"></div>
					<div id="topTracksSorting"></div>
					<div style="display:inline-block; padding-top:0.7em;"><a id="mode_help" href="#" onclick="showHelp('topTracks_text');return false;">高评级音轨帮助</a></div>
					<div id="topTracks_text" style="display:none; padding:0.7em; background-color:Gainsboro;">
						<div class="info4">基于当前视图/筛选条件，对选中内容叠加额外查询与排序规则。<br><br>&#x2022; 入口位置：右键菜单（左侧可配置鼠标动作）<br>&#x2022; 目标播放列表：继承全局发送设置<br>&#x2022; 支持变量：$nowplaying{}、$selected{} 等动态参数<br>&#x2022; 随机排序：使用 $rand() 实现乱序播放<br>&#x2022; 默认排序：留空则沿用面板当前排序规则</div>
					</div>
					<div><br></div>
					<!-- Regorxxx -->
				</div>
			</div>
			<!-- Regorxxx -->
		</div>

		<!-- Regorxxx Drag n' drop to search box. Search settings to search tab -->
		<div id="search" class="tabcontent">
			<div class="row">
				<div class="column33">
					<div class="div_text1">拖拽搜索</div>
					<div class="div_text2">多值标签运算符</div>
					<span class="info5600">默认：</span>
					<span class="dropdown" style="margin-top:0"><a id="searchDragValOpDefault_dropdown" class="dropbtn" href="#" onclick="toggle('searchDragValOpDefault');"></a>
						<span id="searchDragValOpDefault" class="dropdown-content"></span>
					</span>
					<span class="info5600">按住 Ctrl 键：</span>
					<span class="dropdown" style="margin-top:0"><a id="searchDragValOpCtrl_dropdown" class="dropbtn" href="#" onclick="toggle('searchDragValOpCtrl');"></a>
						<span id="searchDragValOpCtrl" class="dropdown-content"></span>
					</span>
					<span class="info5600">按住 Alt 键：</span>
					<span class="dropdown" style="margin-top:0"><a id="searchDragValOpAlt_dropdown" class="dropbtn" href="#" onclick="toggle('searchDragValOpAlt');"></a>
						<span id="searchDragValOpAlt" class="dropdown-content"></span>
					</span>
					<div class="div_text2">标签间运算符</div>
					<span class="info5600">默认：</span>
					<span class="dropdown" style="margin-top:0"><a id="searchDragTagOpDefault_dropdown" class="dropbtn" href="#" onclick="toggle('searchDragTagOpDefault');"></a>
						<span id="searchDragTagOpDefault" class="dropdown-content"></span>
					</span>
					<span class="info5600">按住 Ctrl 键：</span>
					<span class="dropdown" style="margin-top:0"><a id="searchDragTagOpCtrl_dropdown" class="dropbtn" href="#" onclick="toggle('searchDragTagOpCtrl');"></a>
						<span id="searchDragTagOpCtrl" class="dropdown-content"></span>
					</span>
					<span class="info5600">按住 Alt 键：</span>
					<span class="dropdown" style="margin-top:0"><a id="searchDragTagOpAlt_dropdown" class="dropbtn" href="#" onclick="toggle('searchDragTagOpAlt');"></a>
						<span id="searchDragTagOpAlt" class="dropdown-content"></span>
					</span>
					<div class="div_text2" style="margin-top:0">音轨间运算符</div>
					<span class="info5600" style="margin-top:0">默认：</span>
					<span class="dropdown" style="margin-top:0"><a id="searchDragTrackOpDefault_dropdown" class="dropbtn" href="#" onclick="toggle('searchDragTrackOpDefault');"></a>
						<span id="searchDragTrackOpDefault" class="dropdown-content"></span>
					</span>
					<span class="info5600">按住 Ctrl 键：</span>
					<span class="dropdown" style="margin-top:0"><a id="searchDragTrackOpCtrl_dropdown" class="dropbtn" href="#" onclick="toggle('searchDragTrackOpCtrl');"></a>
						<span id="searchDragTrackOpCtrl" class="dropdown-content"></span>
					</span>
					<span class="info5600">按住 Alt 键：</span>
					<span class="dropdown" style="margin-top:0"><a id="searchDragTrackOpAlt_dropdown" class="dropbtn" href="#" onclick="toggle('searchDragTrackOpAlt');"></a>
						<span id="searchDragTrackOpAlt" class="dropdown-content"></span>
					</span>
				</div>

				<div class="column33">
					<div class="div_text1">拖拽搜索</div>
					<div class="div_text2">查询间运算符</div>
					<span class="info5600">默认：</span>
					<span class="dropdown" style="margin-top:0"><a id="searchDragQueryOpDefault_dropdown" class="dropbtn" href="#" onclick="toggle('searchDragQueryOpDefault');"></a>
						<span id="searchDragQueryOpDefault" class="dropdown-content"></span>
					</span>
					<span class="info5600">按住 Shift 键：</span>
					<span class="dropdown" style="margin-top:0"><a id="searchDragQueryOpShift_dropdown" class="dropbtn" href="#" onclick="toggle('searchDragQueryOpShift');"></a>
						<span id="searchDragQueryOpShift" class="dropdown-content"></span>
					</span>
					<div class="div_text2">标签</div>
					<div class="info5">标题格式可在下方设置</div>
					<div id="dragTags"></div>
					<div style="display:inline-block; padding-top:0.7em;"><a id="mode_help" href="#" onclick="showHelp('drag_text');return false;">拖拽搜索帮助</a></div>
					<div id="drag_text" style="display:none; padding:0.7em; background-color:Gainsboro;">
						<div class="info4">用法：<br><br>&#x2022; 支持将曲目直接拖拽至搜索框触发智能搜索<br>&#x2022; 搜索表达式自动适配当前视图查看方式<br>&#x2022; 视图按文件夹结构查看：搜索文件名（正则表达式匹配）<br>&#x2022; 视图其他查看方式：搜索元数据标签（查询语句）<br>&#x2022; 支持完全自定义标签字段与逻辑组合方式<br><br>键盘修饰键：<br><br>&#x2022; 默认模式：直接拖拽，无需辅助按键<br>&#x2022; 功能扩展：配合 Ctrl、Alt、Shift 键切换不同运算逻辑<br>&#x2022; 多值标签运算符：同一标签字段内多个取值的连接逻辑，比如：<br>&emsp; 'ARTIST IS A OR ARTIST IS B'<br><br>&#x2022; 标签间运算符：不同标签字段之间的组合关系，比如：<br>&emsp; 'ARTIST IS ABBA OR GENRE IS 摇滚'<br><br>&#x2022; 音轨间运算符：多选时不同音轨查询条件的合并方式<br><br>&#x2022; 查询间运算符：与搜索框现有表达式的衔接策略（追加或替换）</div>
						<div><br></div>
					</div>
				</div>

				<div class="column33">
					<div class="div_text1">结果</div>
					<span class="dropdown"><a id="searchSend_dropdown" class="dropbtn" href="#" onclick="toggle('searchSend');"></a>
					<span id="searchSend" class="dropdown-content"></span>
					</span>
					<div id="searchEnter" style="padding-top:0.5em;"></div>
					<div style="display:inline-block; padding-top:0.7em;"><a id="searcg_help" href="#" onclick="showHelp('search_text');return false;">搜索帮助</a></div>
					<div id="search_text" style="display:none; padding:0.7em; background-color:Gainsboro;">
						<div class="info4">常规用法：<br><br>&#x2022; 支持三种检索方式：查询语句、正则表达式及拖拽搜索<br>&#x2022; 查询语句支持 $nowplaying{}、$selected{} 等动态参数<br>&#x2022; 正则表达式需严格遵循 /[表达式]/[标志] 格式规范<br>&#x2022; 拖拽搜索功能详见其单独说明<br><br><br>正则表达式用法：<br><br>&#x2022; <a class="tooltip" id="regexpReference" href="https://regexr.com/" target="_blank" oncontextmenu="copyToClipboardId('regexpReference')">正则表达式参考<span class="tooltiptext">左键：IE 打开<br>右键：复制链接</span></a><br>&#x2022; /[表达式]/[标志]<br>&#x2022; 可用的标志包括：'gimsuyt'<br>&#x2022; 特殊标志 't'：用于将文本转写为拉丁字母拼写<br>&#x2022; 从当前查看方式的标题格式表达式中检索查找标签<br>&#x2022; 文件夹结构查看方式下切换为路径匹配<br><br><br>查询语句用法：<br><br>&#x2022; 支持 $nowplaying{}、$nowplayingorselected{} 及 $selected{} 动态参数<br>&#x2022; 若禁用自动刷新，播放/选择变更时上述语法对应的搜索结果将不会更新<br>&#x2022; 使用 $selected{}（及类似参数）时，选择变更可能影响性能，建议优先采用过滤器方案</div>
						<div><br></div>
					</div>
				</div>
			</div>
		</div>

		<div id="display" class="tabcontent">
			<!-- Regorxxx Code cleanup -->
			<div class="row">
				<!-- Regorxxx New Statistics. Adjust column width -->
				<div class="column38">
					<div class="div_text1">顶部栏</b></div>
					<div id="bar"></div>
					<div style="padding-right:10%;" class="info4">*如果隐藏，请右键单击过滤器或图标。如果全部隐藏，请使用上下文菜单。</div>
					<div class="div_text2">主题</div>
					<span class="dropdown"><a id="theme_dropdown" class="dropbtn" href="#" onclick="toggle('themeBg');"></a>
					<span id="themeBg" class="dropdown-content"></span>
					</span>
					<div id="themeStyle" style="padding-top:0.5em;"></div>
					<div id="coverFormat"></div>
					<div id="panelStyle"></div>
				</div>

				<!-- Regorxxx New Statistics. Adjust column width -->
				<div class="column29">
					<div class="div_text1">根节点</div>
					<span class="dropdown"><a id="root_dropdown" class="dropbtn" href="#" onclick="toggle('root');"></a>
					<span id="root" class="dropdown-content"></span>
					</span>
					<div id="rootStyle" style="padding-top:0.5em;"></div>
					<div class="div_text2">节点样式</div>
					<span class="dropdown"><a id="node_dropdown" class="dropbtn" href="#" onclick="toggle('node');"></a>
					<span id="node" class="dropdown-content"></span>
					</span>
					<div id="nodeLines" style="padding-top:0.5em;"></div>
					<div class="div_text2">线条风格</div>
					<div id="lines"></div>
				</div>

				<!-- Regorxxx New Statistics. Adjust column width -->
				<div class="column32">
					<div class="div_text1">悬停效果（背景）</div>
					<span class="dropdown"><a id="showHl_dropdown" class="dropbtn" href="#" onclick="toggle('showHl');"></a>
					<span id="showHl" class="dropdown-content"></span>
					</span>
					<div id="frameStyle" style="padding-top:0.5em;"></div>
					<div class="div_text2">悬停效果（前景）</div>
					<div id="showH2"></div>
					<div class="div_text2">显示</div>
					<div id="show"></div>
					<div class="div_text2">布局参数</div>
					<div class="row">
					<div class="column38">
					<div id="metrics1"></div>
					</div>
					<div class="column61">
					<div id="metrics2"></div>
					</div>
					</div>
					<div id="metrics3"></div>
				</div>
			</div>
			<!-- Regorxxx -->
		</div>

		<!-- Regorxxx New statistics tab -->
		<div id="statistics" class="tabcontent">
			<div class="row">
				<div class="column50">
					<div class="div_text2">标题格式</div>
					<div class="info5">标题格式可在下方设置</div>
					<div id="statisticsTf"></div>
					<div class="div_text2">自定义标签</div>
					<div class="info5">自定义-X 标签名称显示在菜单中，用 | 分隔</div>
					<div id="statisticsNames"></div>
					<div style="display:inline-block; padding-top:0.7em;"><a id="stats_help" href="#" onclick="showHelp('stats_text');return false;">播放统计帮助</a></div>
					<div id="stats_text" style="display:none; padding:0.7em; background-color:Gainsboro;">
						<div class="info4">分为预设统计信息（如时长等）、可自定义统计信息（等级等）以及完全可自定义的统计信息标签。后者可以使用你自己的标题格式表达式和名称，这些名称将显示在菜单条目和面板使用的标签上。<br><br>&#x2022; 平均值：对于每个节点，计算其所有子节点的平均值<br>&#x2022; 总    和：对于每个节点，计算其所有子节点的值的总和<br>&#x2022; 小数设置适用于等级、人气和自定义标签</div>
						<div><br></div>
					</div>
				</div>

				<div class="column50">
					<div class="div_text2">显示</div>
					<div id="labelStatistics"></div>
					<div class="div_text2">项目计数</div>
					<span class="dropdown"><a id="itemCounts_dropdown" class="dropbtn" href="#" onclick="toggle('itemCounts');"></a>
					<span id="itemCounts" class="dropdown-content"></span>
					</span>
					<div id="countsRight" style="padding-top:0.5em;"></div>
					<div style="display:inline-block; padding-top:0.7em;"><a id="counts_help" href="#" onclick="showHelp('counts_text');return false;">项目计数帮助</a></div>
					<div id="counts_text" style="display:none; padding:0.7em; background-color:Gainsboro;">
						<div class="info4">“设置 > 播放统计信息” 中的首个选项将随 “项目计数” 设置联动：可显示为无（隐藏）、音轨总数或项目总数。<br><br>右对齐功能仅在此统计模式下生效，选择其他统计项时将自动禁用（灰显）。</div>
						<div><br></div>
					</div>
				</div>
			</div>
		</div>
		<!-- Regorxxx -->

		<!-- Regorxxx Code cleanup -->
		<div id="albumArt" class="tabcontent">
			<div class="row">
				<div class="column25">
					<div class="div_text1">标签</div>
					<div id="labels"></div>
					<div id="flip"></div>
					<div class="div_text2">角标</div>
					<span class="dropdown"><a id="overlay_dropdown" class="dropbtn" href="#" onclick="toggle('overlay');"></a>
					<span id="overlay" class="dropdown-content"></span>
					</span>
					<div class="div_text2">磁盘缓存</div>
					<div id="useCache"></div>
					<button id="help_button" name="help_button" style="margin:2em 0 0;" type="button">显示帮助</button>
				</div>

				<div class="column33">
					<div class="div_text3">样式</div>
					<table id="imageFormat" class="table77">
						<colgroup>
							<col span="5" style="width:15%">
						</colgroup>
					</table>
					<div class="row">
						<div class="column50">
							<div class="div_text7">封面间距</div>
							<div id="gap"></div>
							<div style="padding:1.01em 0 0.31em;" class="div_text2">流动封面模式</div>
							<div id="flowMode"></div>
							<div style="padding:1.01em 0 0.31em;" class="div_text2">封面阴影</div>
							<div id="dropShadow"></div>
						</div>
						<div class="column50">
							<div id="thumbNailSize" class="div_text7">封面大小</div>
							<span class="dropdown"><a id="thumbSize_dropdown" class="dropbtn" href="#" onclick="toggle('thumbSize');"></a>
							<span id="thumbSize" class="dropdown-content"></span>
							</span>
							<div class="div_text2">查看方式</div>
							<div id="sameAsTree"></div>
						</div>
					</div>
				</div>

				<div class="column41">
					<div class="div_text1">默认图像</div>
					<span style="margin:0 0 0.31em;" class="dropdown"><a id="rootStub_dropdown" class="dropbtnLight" href="#" onclick="toggle('rootStub');"></a>
						<span id="rootStub" style="font:0.85em Segoe UI;" class="dropdown-content"></span>
					</span>
					<span style="margin:1em 0 0.31em 0;" class="dropdown"><a id="noCoverStub_dropdown" class="dropbtnLight" href="#" onclick="toggle('noCoverStub');"></a>
						<span id="noCoverStub" style="font:0.85em Segoe UI;" class="dropdown-content"></span>
					</span>
					<span style="margin:1em 0 0.31em 0;" class="dropdown"><a id="noArtistStub_dropdown" class="dropbtnLight" href="#" onclick="toggle('noArtistStub');"></a>
						<span id="noArtistStub" style="font:0.85em Segoe UI;" class="dropdown-content"></span>
					</span>
					<div class="info5">点击下拉列表，选择要显示的图像。</div>
					<div class="div_text2">索引</div>
					<div id="indexLetter"></div>
				</div>
			</div>
			<div id="help_text" style="display: none;">
				<div class="info5"><b>磁盘缓存</b></div>
				<div class="info5">启用磁盘缓存可显著提升性能。缓存包含预处理图像，加速后续加载过程，并在首次加载时自动构建。缓存完全构建后将达到最佳性能。若新增或更换图像，可通过设置菜单的 “刷新” 选项更新缓存副本。<br><br>支持后台预加载缓存图像，初始化完成后即可使用。此后在可用内存范围内，滚动浏览时图像将即时呈现。</div>
				<div class="info5"><b>尺寸调整</b></div><div class="info5"><ul><li>图像尺寸：Ctrl+Alt+Shift + 鼠标滚轮</li><li>文本与图像：Ctrl+Alt + 鼠标滚轮</li><li>流动封面模式：单列/单行布局（标签居右，尺寸调整不可用）</li></ul></div>
				<div class="info5"><b>图像源配置</b></div>
				<div class="info5">专辑封面来源遵循 foobar2000 设置：参数选项 > 显示中定义的文件路径及内嵌图像。默认占位图设置见上文。<br>艺术家图像：若通过简介 (Biography) 包获取照片，可配置以下路径模板。获取具体路径方法：简介 (Biography) > 来源 (sources) > 打开文件位置 (open file location) > 图像 (image)，从资源管理器地址栏复制所需路径段。</div>
				<div id="photoPath"></div>
				<div class="info5"><b>视图配置</b></div>
				<div class="info5">支持所有查看方式。系统将根据设定类型（封面、艺术家等）加载分组内第一个项目对应的图像。推荐使用 %artist%|%album%... 或 %album artist%|%album%... 类查看模板。请保持完整模板结构以确保曲目正确排序。分组层级默认自动判定，树状与封面视图采用相同查看方式可实现无缝切换。单一内存媒体库副本机制避免重复加载。</div>
				<div class="info5"><b>跟随选择</b></div>
				<div class="info5">启用后继承 “文件>参数选项>显示>选择查看器” 全局设置。</div>
				<div class="info5"><b>仅树状视图</b></div>
				<div class="info5">树状视图下，通过关闭 “面板设置>显示>显示>专辑封面选项” 可禁用封面加载、磁盘缓存及相关菜单功能，切换回封面模式时重新启用即可。</div>
				<div><br></div>
			</div>
		</div>
		<!-- Regorxxx -->

		<!-- Regorxxx Code cleanup -->
		<div id="custom" class="tabcontent">
			<div class="row">
				<div class="div_text1">颜色和字体</div>
				<div class="info5">默认情况下使用用户界面或主题设置。如果需要，启用和配置自定义项目。<br>Ctrl+Alt+滚轮 可用于更改大多数项目的大小（专辑封面另外需要 Shift 键）[重置缩放：菜单>刷新]。</div>
				<div class="column50">
					<div class="info2"><b>字体</b></div>
					<div class="info5" style="margin-left:8.5%">名称，大小，字形 (0-4)</div>
					<div id="fonts"></div>
					<div class="info5" style="margin-left:8.5%">名称，字形 (0-4)</div>
					<div id="albumArtFonts"></div>
					<div class="info6"><b>颜色 (R,G,B)：</b></div>
					<div id="colours1"></div>
					<p "><a class="tooltip" id="colorPicker" href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Colors/Color_picker_tool#ColorPicker_tool" target="_blank" oncontextmenu="copyToClipboardId('colorPicker')">颜色选择器<span class="tooltiptext">左键：IE 打开<br>右键：复制链接</span></a></p>
					<div class="info3">将使用选定的颜色和字体。<br>字体样式代码：0 常规、1 粗体、2 斜体、3 粗斜体、4 下划线</div>
				</div>

				<div class="column50">
					<div class="info6"><b>颜色 (R,G,B 或 R,G,B,A)：</b></div>
					<div id="colours2"></div>
					<div class="info1">颜色：灵活输入，例如 255,0,0 或 0-255-0 或 rgba(255,0,0,64)<br>透明度： 0-255 或 0-1 范围内<br>透明：主背景不适用；可以使用透明填充</div>
				</div>
			</div>
		</div>
		<!-- Regorxxx -->

		<!-- Regorxxx Code cleanup -->
		<div id="advanced" class="tabcontent">
			<div class="row">
				<div class="column50">
					<div class="div_text1">滚动</div>
					<div id="cusScroll"></div>
					<div class="div_text1">滚动条</div>
					<div id="scrollbar"></div>
					<div class="info5" style="padding-right:20%;">在 “面板设置>行为>滚动>箭头” 下选择自定义滚动条图标（如果设置了 Windows 滚动条，则不适用）。在 “面板设置>显示>节点样式” 下设置自定义节点图标。确保字体支持图标。</div>
					<!-- Regorxxx Don't create cache playlists if possible. Chained facets updates -->
					<div class="div_text1">多面板模式（分面）</div>
					<div id="facets"></div>
					<div style="display:inline-block; padding-top:0.7em;"><a id="facets_help" href="#" onclick="showHelp('facets_text');return false;">多面板模式帮助</a></div>
					<div id="facets_text" style="display:none; padding:0.7em; background-color:Gainsboro;">
						<div class="info4" style="line-height:1.6;">链式来源通知：<br><br>&#x2022; 来源设为面板时，启用分面模式。详见 “查看” 选项卡</a><br>&#x2022; 各面板刷新时将实时同步更新关联面板<br>&#x2022; 无需设置多个来源，仅需指定直接父级面板名称<br>&#x2022; 必要时将自动更新整个关联链<br>&#x2022; 禁用此设置可恢复旧版行为<br>&#x2022; 例如：流派|艺术家|专辑 三级面板布局<br>&emsp;&#x25E6; “专辑” 面板使用 “艺术家” 作为来源，“艺术家” 面板使用 “流派”<br>&emsp;&#x25E6; “流派” 面板的任何变动将立即刷新另外两个子面板<br>&emsp;&#x25E6; 旧版行为下，第三级面板需设置为 “流派|艺术家” 双重来源<br><br><br>多源合并：<br><br>&#x2022; 仅当各来源完全独立时才需设置多个来源<br>&#x2022; 配合链式来源通知，多源内容将自动合并去重<br>&#x2022; 支持跨视图/筛选器的选择合并（如艺术家与流派）<br>&#x2022; 目标面板的排序与显示设置独立，不继承来源配置<br>&#x2022; 旧版行为下仅采用最后操作的单一来源<br>&#x2022; 例如：艺术家1|艺术家2|专辑 三级面板布局<br>&emsp;&#x25E6; “专辑” 面板同时以 “艺术家1|艺术家2” 为来源<br>&emsp;&#x25E6; 两艺术家面板的选择将智能合并应用于专辑面板<br>&emsp;&#x25E6; 旧版行为下仅保留最后选中的艺术家来源<br><br><br>内部缓存：<br><br>&#x2022; 面板作为来源时需持久化存储当前选择<br>&#x2022; 支持播放列表（旧版行为）与内部缓存两种方案<br>&#x2022; 旧版行为需为每个来源面板创建专用播放列表<br>&#x2022; 内部缓存需 JSplitter 及 SMP 最新版本支持<br>&#x2022; 环境不支持时将自动降级至旧版行为<br>&#x2022; 推荐使用内部缓存，避免播放列表冗余</div>
						<div><br></div>
					</div>
					<!-- Regorxxx -->
				</div>

				<div class="column50">
					<div class="div_text1">节点</div>
					<div id="cusNode"></div>
					<div class="info5" style="padding-right:10%;">Windows 节点不支持颜色或悬停效果。</div>
					<div class="div_text1">主题模糊</div>
					<div id="themeBlur"></div>
					<div class="div_text1">媒体库</div>
					<div id="load"></div>
					<div id="prefixes"></div>
					<div class="div_text1">根节点折叠时最小化</div>
					<div id="mode"></div>
					<div id="modeInput"></div>
					<div class="info5">需要在 Library Tree 的上方或下方有一个面板。不适用于 面板栈分离器 或 根节点与子节点同列显示。</div>
					<!-- Regorxxx Library profiling -->
					<div class="div_text1">日志记录</div>
					<div id="logging"></div>
					<!-- Regorxxx -->
				</div>
			</div>
		</div>
	</div>
	<div id="div" style="height:0; width:0;outline:none; border:none; padding:none; margin:none; box-sizing:content-box;"></div>
		<!-- Regorxxx IE8 Polyfill -->
		<script>
			if (!('indexOf' in Array.prototype)) {
				Array.prototype.indexOf = function (find, i /*opt*/) {
					'use strict';
					if (typeof i === 'undefined') { i= 0; }
					if (i < 0) { i+= this.length; }
					if (i < 0) { i= 0; }
					for (var n= this.length; i<n; i++) {
						if (i in this && this[i] === find) { return i; }
					}
					return -1;
				};
			}
			if (!('filter' in Array.prototype)) {
				Array.prototype.filter = function(fun /*, thisp */) {
					'use strict';
					if (typeof this === 'undefined' || this === null) { throw new TypeError(); }
					var t = Object(this);
					var len = t.length >>> 0;
					if (typeof fun !== 'function') { throw new TypeError(); }
					var res = [];
					var thisp = arguments[1];
					for (var i = 0; i < len; i++) {
						if (i in t) {
							var val = t[i]; // in case fun mutates this
							if (fun.call(thisp, val, i, t))
							res.push(val);
						}
					}
					return res;
				};
			}
			if (!('startsWith' in String.prototype)) {
				String.prototype.startsWith = function(search, rawPos) {
					var pos = rawPos > 0 ? rawPos | 0 : 0;
					return this.substring(pos, pos + search.length) === search;
				};
			}
		</script>
		<!-- Regorxxx -->
		<script>
			var em, i = 0, is_closed_manually = false, j = 0, height, left, top, window_h, window_w;

			function getValue(id) {
				var div = document.getElementById(id);
				div.style.height = '1em';
				return (em = Math.max(div.offsetHeight, 13.6));
			}
			getValue('div');

			function setWindowSize() {
				window_w = cur.def_w * em || screen.width * 0.67;
				window_h = cur.def_h * em || screen.height * 0.85;
				window_w = Math.min(window_w, screen.width * 0.67);
				window_h = Math.min(window_h, screen.height * 0.85);
				left = (screen.width - window_w) / 2;
				top = (screen.height - window_h) / 2;
				window.resizeTo(window_w, window_h);
				window.moveTo(left, top);
				height = document.documentElement.clientHeight || document.body.clientHeight;
			}

			function openPage(pageName,elmnt,color) {
				cur.page = pageName;
				var i, tabcontent, tablinks;
				tabcontent = document.querySelectorAll(".tabcontent");
				for (i = 0; i < tabcontent.length; i++) {
					tabcontent[i].style.display = "none";
				}
				tablinks = document.getElementsByTagName("a");
				for (i = 0; i < tablinks.length; i++) {
					tablinks[i].style.backgroundColor = "";
				}
				document.getElementById(pageName).style.display = "block";
				elmnt.style.backgroundColor = color;
				document.getElementById(pageName).style.height = height - window.tablink.offsetHeight - window.btn_cnt_right.offsetHeight;
				document.getElementById(pageName).style.overflow = "auto";
				var btns = ["btn_add", "btn_up", "btn_down", "btn_delete"];
				for (i = 0; i < btns.length; i++) {
					document.getElementById(btns[i]).style.display = pageName == 'views' || pageName == 'filters' ? "inline-block" : "none";
				}
				document.getElementById("btn_ok").focus();
			}

			document.getElementsByTagName("BODY")[0].onresize = function() {
				height = document.documentElement.clientHeight || document.body.clientHeight;
				window_w = (document.documentElement.clientWidth || document.body.clientWidth) + widthOffset;
				window_h = height + heightOffset;
				cur.w = Math.round(window_w / em);
				cur.h = Math.round(window_h / em);
				checkWindowDefaultSize();
			}

			function checkWindowDefaultSize() {
				var def_w = cur.def_w * em || screen.width * 0.67;
				var def_h = cur.def_h * em || screen.height * 0.85;
				def_w = Math.min(def_w, screen.width * 0.67);
				def_h = Math.min(def_h, screen.height * 0.85);
				window.setSize.disabled = window_w == def_w && window_h == def_h;
			}

			function close_window() {
				is_closed_manually = true;
				window.open('', '_self', '');
				window.close();
			}

			function remove(n) {
				n.parentNode && n.parentNode.removeChild(n);
			}

			function moveUp(element) {
				if (element.previousSibling)
					element.parentNode.insertBefore(element, element.previousSibling);
			}
			function moveDown(element) {
				if (element.nextSibling && element.nextSibling.id != "view_cnt_folderView" && element.nextSibling.id != "filter_cnt_menuName")
					element.parentNode.insertBefore(element.nextSibling, element);
			}

			function set_btn_add_state() {
				switch (cur.page) {
					case 'views':
						var ln = document.getElementById("view").querySelectorAll("[id^='view_cnt']").length
						document.getElementById("btn_add").disabled = ln > 98 ? true : false;
						break;
					case 'filters':
						var ln = document.getElementById("filter").querySelectorAll("[id^='filter_cnt']").length
						document.getElementById("btn_add").disabled = ln > 98 ? true : false;
						break;
				}
			}

			function set_btn_apply_state() {
				getValues();

				var id = document.activeElement.id;
				if (/scrollbar_container6/.test(id)) {
					window.scrollbar_container5.style.fontFamily = window.scrollbar_container6.value;
				}

				var needCustomCol = /colour_container/.test(id);
				if (needCustomCol) setCustomColours('value');
				if (/statisticsNames_container/.test(id)) { setStatisticsLabels(); } // Regorxxx <- New statistics ->
				document.getElementById("btn_apply").disabled = JSON.stringify(cfg) != parsed_args[0] || JSON.stringify(ppt) != parsed_args[1] ? false : true;
			}

			function set_btn_del_state() {
				switch (cur.page) {
					case 'views':
						var ln = document.getElementById("view").querySelectorAll("[id^='view_cnt']").length
						document.getElementById("btn_delete").disabled = ix.view != -1 && ln > 1 ? false : true;
						break;
					case 'filters':
						var ln = document.getElementById("filter").querySelectorAll("[id^='filter_cnt']").length
						document.getElementById("btn_delete").disabled = ix.filter != -1 && ln > 1 ? false : true;
						break;
				}
			}

			function set_btn_dn_state() {
				switch (cur.page) {
					case 'views':
						var element = document.getElementById("view_cnt" + ix.view);
						document.getElementById("btn_down").disabled = ix.view == -1 || element.nextSibling && element.nextSibling.id == "view_cnt_folderView" ? true : false;
						break;
					case 'filters':
						var element = document.getElementById("filter_cnt" + ix.filter);
						document.getElementById("btn_down").disabled = ix.filter == -1 || element.nextSibling && element.nextSibling.id == "filter_cnt_menuName" ? true : false;
						break;
				}
			}

			function set_btn_up_state() {
				switch (cur.page) {
					case 'views':
						var element = document.getElementById("view_cnt" + ix.view);
						document.getElementById("btn_up").disabled = ix.view == -1 || !element || !element.previousSibling ? true : false;
						break;
					case 'filters':
						var element = document.getElementById("filter_cnt" + ix.filter);
						document.getElementById("btn_up").disabled = ix.filter == -1 || !element || !element.previousSibling ? true : false;
						break;
				}
			}

			function assign(c, t) {
				c = c.replace(/[^0-9.,-]/g, '').replace(/-/g, ',').split(',');
				var cc = ''; if (c.length != 3 && c.length != 4) return [255, 255, 255];
				for (i = 0; i < c.length; i++) {
					c[i] = parseFloat(c[i]);
					if (i < 3) c[i] = clamp(Math.round(c[i]), 0, 255);
					else if (i == 3) {
						if (c[i] <= 1) c[i] = Math.round(255 * c[i]);
						else c[i] = clamp(Math.round(c[i]), 0, 255);
					}
				}
				switch (t) {
					case 0: cc = [c[0], c[1], c[2]]; break;
					case 1: {
						switch (c.length) {
							case 3: cc = [c[0], c[1], c[2]]; break;
							case 4: cc = RGBAtoRGB([c[0], c[1], c[2], c[3]], [255, 255, 255, 255]); break;
						}
						break;
					}
				}
				return cc;
			}

			function clamp(num, min, max) {
				num = num <= max ? num : max; num = num >= min ? num : min; return num;
			}

			function getSelCol(c) {
				var cc = [], v = 1;
				for (i = 0; i < c.length; i++) {
					v = c[i] / 255;
					cc.push(v <= 0.03928 ? v /= 12.92 : Math.pow(((v + 0.055 ) / 1.055), 2.4));
				}
				var L = 0.2126 * cc[0] + 0.7152 * cc[1] + 0.0722 * cc[2]; if (L > 0.31) return 'black'; else return 'white';
			}

			function RGBAtoRGB(c, bg) {
				var r = c[0] / 255, g = c[1] / 255, b = c[2] / 255, a = c[3] / 255, bgr = bg[0] / 255, bgg = bg[1] / 255, bgb = bg[2] / 255; var nR = ((1 - a) * bgr) + (a * r), nG = ((1 - a) * bgg) + (a * g), nB = ((1 - a) * bgb) + (a * b); nR = clamp(Math.round(nR * 255), 0, 255); nG = clamp(Math.round(nG * 255), 0, 255); nB = clamp(Math.round(nB * 255), 0, 255); return [nR, nG, nB];
			}

			var callback;
			var cbox_h = 15;
			var cbox_w = 17;
			var cfg = [];
			var cur = {};
			var ix = {filter: -1, view: -1}
			var new_id = 100;
			var parsed_args;
			var props_callback
			var ppt = {};
			var sizes = [];

			try {
				parsed_args = window.external.dialogArguments.toArray();
			}
			catch(e) {}

			if (parsed_args) {
				cur = JSON.parse(parsed_args[2]);
				document.title = 'Library Tree ' + cur.version + '：面板设置';
				cfg = JSON.parse(parsed_args[0]);
				ppt = JSON.parse(parsed_args[1]);
				cbox_h = Math.round(Math.max(em, 13));
				cbox_w = cbox_h + 2;
				var cbox = "width:" + cbox_w + "px; height:" + cbox_h + "px;"
				window_w = cur.w * em || screen.width * 0.67;
				window_h = cur.h * em || screen.height * 0.85;
				if (cur.w == cur.def_w) window_w = Math.min(window_w, screen.width * 0.67);
				if (cur.h == cur.def_h) window_h = Math.min(window_h, screen.height * 0.85);
				left = (screen.width - window_w) / 2;
				top = (screen.height - window_h) / 2;
				window.resizeTo(window_w, window_h);
				window.moveTo(left, top);
				height = document.documentElement.clientHeight || document.body.clientHeight;
				var heightOffset = window_h - height;
				var widthOffset = window_w - (document.documentElement.clientWidth || document.body.clientWidth);
				checkWindowDefaultSize();
				document.getElementById(cur.page + 'Cfg').click();

				var actionTypeLabels = ['默认', '浏览（继续播放播放列表）', '播放（播放并管理，无需播放列表）'];
				var albumArtGapLabels = ['标准（0 = 自动）', '紧凑（用于叠加模式）'];
				var albumArtLabels = ['无', '底部', '右侧', '封面叠加', '深色衬底', '信息对调'];
				var albumArtOverlayLabels = ['无', '音轨计数', '年份'];
				var altClickLabels = ['添加到默认播放列表', '添加到当前播放列表', '添加到播放队列（Alt + 双击移除）', '发送高评级音轨到默认播放列表', '发送高评级音轨到当前播放列表', '添加高评级音轨到默认播放列表', '添加高评级音轨到当前播放列表']; // Regorxxx <- Top tracks ->
				var barLabels = ['搜索', '过滤按钮', '设置按钮*'];
				var clickLabels = ppt['actionMode_internal'].value == 1 ? ['发送到播放列表'] : ppt['actionMode_internal'].value == 2 ? ['选择'] : ['选择', '发送到播放列表', '发送到播放列表并播放', '发送到播放列表并播放 [如果正在播放则添加]'];
				var colourLabels = ['文本', '高亮文本', '选定文本', '正在播放文本/侧标高亮显示', '搜索文本', '按钮', '背景', '突出背景', '选定背景', '悬停边框', '选定边框', '计数 & 播放统计', '折叠节点', '展开节点', '悬停节点', '节点线', '分隔符', '侧标', '透明填充'];
				var coverFormatLabels = ['封面自动填充', '封面不透明度 (%)'];
				var cusNodeLabels = ['自定义展开|折叠图标', '自定义图标字体名称', '自定义图标填充 (+/-)', '方框节点：使用 Windows']
				var cusScrollLabels = ['行数 (0 = 页面)', '最大平滑过渡时长（毫秒）', '最大触控判定时长（毫秒）', '触摸灵敏度 0-10'];
				var dblClickLabels = ppt['actionMode_internal'].value == 1 ? ['发送到播放列表并播放'] : ppt['actionMode_internal'].value == 2 ? ['发送到播放队列并播放'] : ['发送到播放列表', '发送到播放列表并播放', '展开/折叠（树状视图）', '发送到播放队列并播放'];
				var diskCacheLabels = ['启用', '预加载缓存的图像']
				var followCurrentLabels = ['标准模式', '流动封面模式'];
				// Regorxxx <- View by Folder structure sorting. Custom sorting for standard views
				var viewSortingLabels = ['Library Tree（原版）', 'Library Tree（更新版）', '类 Windows（基础）', '类 Windows（高级）']
				var folderSortingFbLabels = ['媒体库来源优先使用原生排序方式'];
				var sortingTransLabels = ['将内容转写为拉丁字母', '将内容转写为拉丁字母'];
				// Regorxxx  ->
				var fontLabels = ['主要', '专辑封面分组第1行', '专辑封面分组第2行', '专辑封面播放统计行'];
				var highLightLabels = ['无', '侧标', '突出', '边框', '始终使用指针（非手形）', '高亮节点', '高亮文本'];
				var indexLetterLabels = ['拖动滚动条时显示', '字符数（0 = 自动）', '自动检测前导年份（覆盖上方设置）'];
				var keystrokeLabels = ['选择', '发送到播放列表']
				var itemCountsLabels = ['无', '# 音轨', '# 项目', '右对齐（树状 / 文本）'];
				var metricsLabels = ['左右边距', '树状视图缩进', '树状视图行间距', '专辑封面视图行间距', '上下边距（无顶部栏时）', '侧标宽度（0 = 自动）'];
				// Regorxxx <- Top tracks
				var mbtnClickLabels = ppt['actionMode_internal'].value == 2
					? ['添加到播放队列（中键双击移除）']
					: ['添加到默认播放列表', '添加到当前播放列表', '添加到播放队列（中键双击移除）', '发送高评级音轨到默认播放列表', '发送高评级音轨到当前播放列表', '添加高评级音轨到默认播放列表', '添加高评级音轨到当前播放列表'];
				// Regorxxx ->
				var nodeLabels = ['方框', '箭头', '箭头（细）', '三角', '三角（细）', '加减号', '自定义'];
				var playlistLabels = ['默认', '改变时激活'];
				var playlistSortLabels = ['播放列表的排序顺序（空 = 默认）'];
				var topTracksLabels = ['自定义查询过滤器', '自定义排序的标题格式表达式']; // Regorxxx <- Top tracks ->
				var rememberLabels = ['退出时', '所有视图', '搜索前'];
				var rootLabels = ['隐藏', '所有音乐', '查看方式', '摘要项目', '与子节点同列显示（树状视图）', '显示来源名称'];
				var sbarColLabels = ['灰色', '混合'];
				var sbarIconLabels = ['箭头', '三角', '自定义'];
				var sbarShowLabels = ['隐藏', '自动', '显示'];
				var sbarTypeLabels = ['默认', '风格', 'Windows'];
				var scrollbarLabels = ['滑块宽度', '滑道宽度（0 = 自动）', '箭头宽度', '箭头填充 (+/-)', '滑块最小高度', '自定义图标', '自定义图标字体名称', '自定义图标偏移 (%)', '首选全高滚动条'];
				var facetsLabels = ['优先使用内部缓存（如果支持）', '链式来源通知']; // Regorxxx <- Don't create cache playlists if possible.Chained facets updates ->
				var loggingLabels = ['媒体库加载分析']; // Regorxxx <- Library profiling ->
				var scrollLabels = ['使用 Windows 指标', '平滑滚动', '触摸控制'];
				var selectionLabels = ['整行', '按 Enter 键或右键菜单发送到列表后自动播放'];
				var searchLabels = ['仅搜索', '按 Enter 键将结果发送到播放列表','自动将结果发送到播放列表', '按 Enter 键进行搜索', '使用 $selected{} 等参数时自动刷新'];
				var showLabels = ['条纹背景', '高亮正在播放项', '正在播放侧标（树状 / 文本）', '正在播放指示器（树状 / 文本）', '专辑封面选项', '分面视图', '音轨（树状）'];
				// Regorxxx <- New statistics
				var statisticsLabels = ['等级', '人气', '日期', '自定义-1(总和)', '自定义-2(总和)', '自定义-3(总和)', '自定义-1(平均值)', '自定义-2(平均值)', '自定义-3(平均值)', '', '自动显示标签', '自动显示提示'];
				var statisticsDecimalsLabels = ['显示的小数位数'];
				// Regorxxx ->
				// Regorxxx <- Send to playlist & select
				var selectAddedToPlsLabels = ['发送到播放列表并选择项目'];
				// Regorxxx ->
				var targetPlaylistLabels = ['默认', '当前'];
				var tfInput = ['媒体库查看'];
				var themeLabels = !ppt['themed_internal'].value ? ['用户界面', '深色', '混合', '浅色', '随机', '封面', '交换颜色', '来源为面板时，使用接收到的项目图像'] : ['N/A: central set', 'N/A: central set', 'N/A: central set', 'N/A: central set', 'N/A: central set', 'N/A: central set', 'N/A: central set', 'N/A: central set', 'N/A: central set', 'N/A: central set'];
				var themeBlurLabels = ['自动填充', '级别 (%)', '不透明度 (%)', '%'];
				var thumbNailGapLabels = ['Thumbnail gap'];
				var thumbnailSizeLabels = ['迷你', '小', '常规', '中', '大', 'XL', 'XXL', '最大'];
				var treeLabels = ['自动折叠', '展开单个项目', '展开，如果音轨计数小于：'];
				var loadLabels = ['自动同步媒体库变化', '删除或后移的前缀（| 分隔符）']
				var modeLabels = ['最大高度', '最小高度', 'Limit menu expand: 10-6000'];
				// Regorxxx <- Drag n' drop to search box
				var dragValOpDefaultLabels = ['仅使用第一个值', '用 \'OR\' 连接', '用 \'AND\' 连接'];
				var dragValOpCtrlLabels = dragValOpDefaultLabels;
				var dragValOpAltLabels = dragValOpDefaultLabels;
				var dragTagOpDefaultLabels = ['仅使用第一个标签', '用 \'OR\' 连接', '用 \'AND\' 连接'];
				var dragTagOpCtrlLabels = dragTagOpDefaultLabels;
				var dragTagOpAltLabels = dragTagOpDefaultLabels;
				var dragTrackOpDefaultLabels = ['仅使用第一首音轨', '用 \'OR\' 连接', '用 \'AND\' 连接'];
				var dragTrackOpCtrlLabels = dragTrackOpDefaultLabels;
				var dragTrackOpAltLabels = dragTrackOpDefaultLabels;
				var dragQueryOpDefaultLabels = ['替换搜索', '用 \'OR\' 连接', '用 \'AND\' 连接'];
				var dragQueryOpShiftLabels = dragQueryOpDefaultLabels;
				var dragTagsLabels = ['默认', '按住 Ctrl 键', '按住 Alt 键'];
				// Regorxxx ->

				function setNodeLabels() {
					nodeLabels[0] = !ppt['winNode_internal'].value ? '方框' : '方框 (Windows)';
					if (ppt['nodeStyle_internal'].value == 0 || ppt['nodeStyle_internal'].value == 7) window.node_dropdown.innerHTML = nodeLabels[0];
					window.nodeNo0.innerHTML = nodeLabels[0];
				}

				var input = {
					behaviour: {
						name: ['autoExpandLimit', 'libPlaylist', 'customSort', 'topTracksFilter', 'topTracksSorting'], // Regorxxx <- Top tracks ->
						type: ['int', 'text', 'text', 'text', 'text'] // Regorxxx <- Top tracks ->
					},
					// Regorxxx <- Drag n' drop to search box
					search: {
						name: ['searchDragTags', 'searchDragTagsCtrl', 'searchDragTagsAlt'],
						type: ['text', 'text', 'text']
					},
					// Regorxxx ->
					// Regorxxx <- New statistics
					display: {
						name: ['covAlpha', 'margin', 'treeIndent', 'verticalPad', 'verticalAlbumArtPad', 'marginTopBottom', 'sideMarkerWidth'],
						type: ['float', 'int', 'int', 'int', 'int', 'int', 'int']
					},
					statistics: {
						name: ['tfRating', 'tfPopularity', 'tfDate', 'tfCustom1Sum', 'tfCustom2Sum', 'tfCustom3Sum', 'tfCustom1Avg', 'tfCustom2Avg', 'tfCustom3Avg', 'tfCustomLabels', 'ratingDecimals'],
						type: ['text', 'text', 'text', 'text', 'text', 'text', 'text', 'text', 'text', 'text', 'int']
					},
					// Regorxxx ->
					albumArt: {
						name: ['thumbNailGapStnd', 'thumbNailGapCompact', 'albumArtLetterNo'],
						type: ['int', 'int', 'int']
					},
					custom: {
						name: ['custFont', 'custAlbumArtGrpFont', 'custAlbumArtLotFont', 'custAlbumArtDurFont', 'text', 'text_h', 'textSel', 'nowp', 'search', 'txt_box', 'bg', 'bg_h', 'bgSel', 'frame', 'bgSelframe', 'counts', 'icon_c', 'icon_e', 'icon_h', 'line', 's_line', 'sideMarker', 'bgTrans'],
						type : ['text', 'text', 'text', 'text', 'text', 'text', 'text', 'text', 'text', 'text', 'text', 'text', 'text', 'text', 'text', 'text', 'text', 'text', 'text', 'text', 'text', 'text', 'text']
					},
					advanced: {
						name: ['scrollStep', 'durationScroll', 'durationTouchFlick', 'flickDistance', 'sbarWidth', 'narrowSbarWidth', 'sbarArrowWidth', 'sbarPad', 'sbarGripHeight', 'arrowSymbol', 'butCustIconFont', 'sbarButPad', 'iconCustom', 'custIconFont', 'iconVerticalPad', 'blurTemp', 'blurAlpha','prefix', 'pn_h_max', 'pn_h_min', 'treeExpandLimit'],
						type : ['float', 'float', 'float', 'float', 'float', 'float', 'float', 'float', 'float', 'text', 'text', 'float', 'text', 'text', 'float', 'float', 'float', 'text', 'int', 'int', 'int']
					},
					all: {}
				}
				// Regorxxx <- Drag n' drop to search box. New statistics
				input.all.name = input.behaviour.name.concat(input.search.name, input.display.name, input.statistics.name, input.albumArt.name, input.custom.name, input.advanced.name);
				input.all.type = input.behaviour.type.concat(input.search.type, input.display.type, input.statistics.type, input.albumArt.type, input.custom.type, input.advanced.type);
				// Regorxxx <- Better debug
				if (input.all.name.length !== input.all.type.length) { throw new Error('输入名称长度 (' + input.all.name.length +') 与类型长度不匹配 (' + input.all.type.length + ')'); }
				// Regorxxx ->
				// Regorxxx ->
				var box = {
					behaviour: ['sbarWinMetrics', 'smooth', 'touchControl', 'autoCollapse', 'treeAutoExpandSingle', 'treeAutoExpand', 'rememberTree', 'rememberView', 'rememberPreSearch', 'fullLineSelection', 'autoPlay', 'stndModeFollowSelection', 'flowModeFollowSelection', 'folderSortingFb', 'folderSortingTrans', 'viewSortingTrans', 'activateOnChange', 'selectAdded'], // Regorxxx <- Send to playlist & select ->
					search: ['searchEnter', 'searchRefreshTf'], // Regorxxx <- New search tab ->
					display: ['searchShow', 'filterShow', 'settingsShow', 'swapCol', 'autoFill', 'recItemImage', 'inlineRoot', 'showSource', 'nodeLines', 'colLineDark', 'frameImage', 'mousePointerOnly', 'highLightNode', 'highLightText', 'rowStripes', 'highLightNowplaying', 'nowPlayingSidemarker', 'nowPlayingIndicator', 'albumArtOptionsShow', 'facetView', 'showTracks'], // Regorxxx <- New statistics tab ->
					statistics: ['labelStatistics', 'tooltipStatistics', 'countsRight'], // Regorxxx <- New statistics tab ->
					albumArt: ['albumArtFlipLabels', 'albumArtDiskCache', 'albumArtPreLoad', 'albumArtFlowMode', 'albumArtDropShadow', 'artTreeSameView', 'albumArtLetter', 'albumArtYearAuto'],
					custom: ['custFontUse', 'custAlbumArtGrpFontUse', 'custAlbumArtLotFontUse', 'custAlbumArtDurFontUse', 'textUse', 'text_hUse', 'textSelUse', 'nowpUse', 'searchUse', 'txt_boxUse', 'bgUse', 'bg_hUse', 'bgSelUse', 'frameUse', 'bgSelframeUse', 'countsUse', 'icon_cUse', 'icon_eUse', 'icon_hUse', 'lineUse', 's_lineUse', 'sideMarkerUse', 'bgTransUse'],
					advanced: ['sbarFullHeight', 'panelInternalCache', 'libSourceChained', 'winNode', 'blurAutofill', 'libAutoSync', 'pn_h_auto', 'logLibProfiler'] // Regorxxx <- Library profiling. Don't create cache playlists if possible. Chained facets updates ->
				}
				// Regorxxx <- New search tab
				box.all = box.behaviour.concat(box.search, box.display, box.statistics, box.albumArt, box.custom, box.advanced);
				// Regorxxx ->

				var radio = {
					views: [],
					filters: [],
					behaviour: ['actionMode', 'sendToCur'],
					search: [], // Regorxxx <- Drag n' drop to search box ->
					display: [],
					statistics: ['itemShowStatistics'], // Regorxxx <- New statistics tab ->
					albumArt: ['albumArtLabelType', 'imgStyleFront', 'imgStyleBack', 'imgStyleDisc', 'imgStyleIcon', 'imgStyleArtist'],
					custom: [],
					advanced: []
				}
				radio.all = radio.behaviour.concat(radio.statistics, radio.albumArt);
				callback = parsed_args[3];
				props_callback = parsed_args[4];

				function setSbarShow(n) {
					window.sbarShow_dropdown.innerHTML = sbarShowLabels[n];
					ppt['sbarShow_internal'].value = n;
					window.sbarShow.style.display = 'none';
				}

				function setsbarType(n) {
					window.sbarType_dropdown.innerHTML = sbarTypeLabels[n];
					ppt['sbarType_internal'].value = n;
					sbar_col_dropdown.style.display = n != 2 ? "inline-block" : "none";
					sbar_icon_dropdown.style.display = n != 2 ? "inline-block" : "none";
					window.sbarType.style.display = 'none';
				}

				function setSbarCol(n) {
					window.sbarCol_dropdown.innerHTML = sbarColLabels[n];
					ppt['sbarCol_internal'].value = n;
					window.sbarCol.style.display = 'none';
				}

				function setSbarIcon(n) {
					window.sbarIcon_dropdown.innerHTML = sbarIconLabels[n];
					ppt['sbarButType_internal'].value = n;
					window.sbarIcon.style.display = 'none';
				}

				function setRootImage(n) {
					window.rootStub_dropdown.innerHTML = '<b>所有音乐:</b> <img src="'+rootStubLabels[n].path+'" width="'+ em +'" height="'+ em +'" class="stub"/> '+rootStubLabels[n].name+'<';
					ppt.curRootImg_internal.value = n;
					btn_apply.onclick();
					window.rootStub.style.display = 'none';
				}

				function setNoArtistImage(n) {
					window.noArtistStub_dropdown.innerHTML = '<b>无艺术家:</b> <img src="'+noArtistStubLabels[n].path+'" width="'+ em +'" height="'+ em +'" class="stub"/> '+noArtistStubLabels[n].name+'<';
					ppt.curNoArtistImg_internal.value = n;
					btn_apply.onclick();
					window.noArtistStub.style.display = 'none';
				}

				function setNoCoverImage(n) {
					window.noCoverStub_dropdown.innerHTML = '<b>无封面:</b> <img src="'+noCoverStubLabels[n].path+'" width="'+ em +'" height="'+ em +'" class="stub"/> '+noCoverStubLabels[n].name+'<';
					ppt.curNoCoverImg_internal.value = n;
					btn_apply.onclick();
					window.noCoverStub.style.display = 'none';
				}

				function setRoot(n) {
					window.root_dropdown.innerHTML = rootLabels[n];
					ppt['rootNode_internal'].value = n;
					window.root.style.display = 'none';
				}

				function setNode(n) {
					setNodeLabels();
					window.node_dropdown.innerHTML = nodeLabels[n];
					ppt['nodeStyle_internal'].value = n;
					window.node.style.display = 'none';
				}

				function setItemCounts(n) {
					window.itemCounts_dropdown.innerHTML = itemCountsLabels[n];
					ppt['nodeCounts_internal'].value = n;
					window.itemCounts.style.display = 'none';
				}

				function setHoverBg(n) {
					window.showHl_dropdown.innerHTML = highLightLabels[n];
					ppt['highLightRow_internal'].value = n;
					window.showHl.style.display = 'none';
				}

				function setOverlay(n) {
					window.overlay_dropdown.innerHTML = albumArtOverlayLabels[n];
					ppt['itemOverlayType_internal'].value = n;
					window.overlay.style.display = 'none';
				}

				// Regorxxx <- Drag n' drop to search box
				function setSearchSend(n) {
					window.searchSend_dropdown.innerHTML = searchLabels[n];
					ppt['searchSend_internal'].value = n;
					window.searchSend.style.display = 'none';
				}

				function setDragValOpDefault(n) {
					window.searchDragValOpDefault_dropdown.innerHTML = dragValOpDefaultLabels[n];
					ppt['searchDragValOp_internal'].value = ['', 'OR', 'AND'][n];
					window.searchDragValOpDefault.style.display = 'none';
				}
				function setDragValOpCtrl(n) {
					window.searchDragValOpCtrl_dropdown.innerHTML = dragValOpCtrlLabels[n];
					ppt['searchDragValOpCtrl_internal'].value = ['', 'OR', 'AND'][n];
					window.searchDragValOpCtrl.style.display = 'none';
				}
				function setDragValOpAlt(n) {
					window.searchDragValOpAlt_dropdown.innerHTML = dragValOpAltLabels[n];
					ppt['searchDragValOpAlt_internal'].value = ['', 'OR', 'AND'][n];
					window.searchDragValOpAlt.style.display = 'none';
				}
				function setDragTagOpDefault(n) {
					window.searchDragTagOpDefault_dropdown.innerHTML = dragTagOpDefaultLabels[n];
					ppt['searchDragTagOp_internal'].value = ['', 'OR', 'AND'][n];
					window.searchDragTagOpDefault.style.display = 'none';
				}
				function setDragTagOpCtrl(n) {
					window.searchDragTagOpCtrl_dropdown.innerHTML = dragTagOpCtrlLabels[n];
					ppt['searchDragTagOpCtrl_internal'].value = ['', 'OR', 'AND'][n];
					window.searchDragTagOpCtrl.style.display = 'none';
				}
				function setDragTagOpAlt(n) {
					window.searchDragTagOpAlt_dropdown.innerHTML = dragTagOpAltLabels[n];
					ppt['searchDragTagOpAlt_internal'].value = ['', 'OR', 'AND'][n];
					window.searchDragTagOpAlt.style.display = 'none';
				}
				function setDragTrackOpDefault(n) {
					window.searchDragTrackOpDefault_dropdown.innerHTML = dragTrackOpDefaultLabels[n];
					ppt['searchDragTrackOp_internal'].value = ['', 'OR', 'AND'][n];
					window.searchDragTrackOpDefault.style.display = 'none';
				}
				function setDragTrackOpCtrl(n) {
					window.searchDragTrackOpCtrl_dropdown.innerHTML = dragTrackOpCtrlLabels[n];
					ppt['searchDragTrackOpCtrl_internal'].value = ['', 'OR', 'AND'][n];
					window.searchDragTrackOpCtrl.style.display = 'none';
				}
				function setDragTrackOpAlt(n) {
					window.searchDragTrackOpAlt_dropdown.innerHTML = dragTrackOpAltLabels[n];
					ppt['searchDragTrackOpAlt_internal'].value = ['', 'OR', 'AND'][n];
					window.searchDragTrackOpAlt.style.display = 'none';
				}
				function setDragQueryOpDefault(n) {
					window.searchDragQueryOpDefault_dropdown.innerHTML = dragQueryOpDefaultLabels[n];
					ppt['searchDragQueryOp_internal'].value = ['', 'OR', 'AND'][n];
					window.searchDragQueryOpDefault.style.display = 'none';
				}
				function setDragQueryOpShift(n) {
					window.searchDragQueryOpShift_dropdown.innerHTML = dragQueryOpShiftLabels[n];
					ppt['searchDragQueryOpShift_internal'].value = ['', 'OR', 'AND'][n];
					window.searchDragQueryOpShift.style.display = 'none';
				}
				// Regorxxx ->

				function setTheme(n) {
					window.theme_dropdown.innerHTML = themeLabels[n];
					ppt['theme_internal'].value = n;
					window.themeBg.style.display = 'none';
				}

				function setthumbSize(n) {
					window.thumbSize_dropdown.innerHTML = thumbnailSizeLabels[n];
					ppt['thumbNailSize_internal'].value = n;
					window.thumbSize.style.display = 'none';
				}

				function setClickAction(n) {
					window.click_dropdown.innerHTML = clickLabels[n];
					ppt['clickAction_internal'].value = n;
					window.click.style.display = 'none';
				}

				function setDblClickAction(n) {
					window.dblClick_dropdown.innerHTML = dblClickLabels[n];
					ppt['dblClickAction_internal'].value = n;
					window.dblClick.style.display = 'none';
				}

				function setMbtnClickAction(n) {
					window.mbtnClick_dropdown.innerHTML = mbtnClickLabels[n];
					ppt['mbtnClickAction_internal'].value = n;
					window.mbtnClick.style.display = 'none';
				}

				function setAltClickAction(n) {
					window.altClick_dropdown.innerHTML = altClickLabels[n];
					ppt['altClickAction_internal'].value = n;
					window.altClick.style.display = 'none';
				}

				function setKeyAction(n) {
					window.keystroke_dropdown.innerHTML = keystrokeLabels[n];
					ppt['keyAction_internal'].value = n;
					window.keystroke.style.display = 'none';
				}

				// Regorxxx <- View by Folder structure sorting. Custom sorting for standard views
				function setFolderSorting(n) {
					window.folderSorting_dropdown.innerHTML = viewSortingLabels[n];
					ppt['folderSorting_internal'].value = n;
					window.folderSorting.style.display = 'none';
				}

				function setViewSorting(n) {
					window.viewSorting_dropdown.innerHTML = viewSortingLabels[n];
					ppt['viewSorting_internal'].value = n;
					window.viewSorting.style.display = 'none';
				}
				// Regorxxx ->

				var imgTable = ['imgStyleFront', 'imgStyleBack', 'imgStyleDisc', 'imgStyleIcon', 'imgStyleArtist'];
				var menuTable = ['buttonCol', 'searchCol', 'searchLnCol', 'nodeLineCol'];
				function getTableData(id) {
					var cells = [];
					var headings = [];
					var columnCount = 0;
					switch (id) {
						case 'imageFormat':
							var headers = ['封面', '封底', '碟片', '图标', '艺术家', ''];
							cells.push(headers);
							var radioLabels = ['常规', '自动填充', '圆形'];
							var items = [];
							for (j = 0; j < 3; j++) {
								items[j] = [];
								for (i = 0; i < imgTable.length; i++) {
									var n = imgTable[i];
									var id = imgTable[i] + j;
									items[j].push('<input id="'+id+'" name="'+n+'" style="'+cbox+'" type="radio" />');
									if (i == 4) {
										items[j].push('<div style="padding-left:0.46em; text-align:left">'+radioLabels[j]+'</div>');
										cells.push(items[j]);
									}
								}
							}
							columnCount = 6;
							break;
						case 'syntaxFilter': // Regorxxx <- Add help to filter tab ->
						case 'syntax':
							// Regorxxx <- Merge now playing and selected as fallback. Code cleanup
							var headers = ['语法', '用\uFEFF于\u00A0\u00A0', '描述'];
							cells.push(headers);
							var labels = [
							['%&ltfield&gt%', '查看', '将多个字段值拆分为独立项目显示，例如使用 %&ltartist&gt%'],
							['$stripbranchprefix{%&ltfield&gt%}', '查看', '功能同上，同时会移除各字段值中的前缀（如开头的 "The" 或 "A"），例如使用 $stripbranchprefix{%&ltartist&gt%}'],
							['$swapbranchprefix{%&ltfield&gt%}', '查看', '功能同上，同时会将字段值中的前缀（如开头的 "The" 或 "A"）移至末尾，例如使用 $swapbranchprefix{%&ltartist&gt%}'],
							['%field1%&#166%field2%&#166...', '查看', '使用 &#166 可将不同字段合并至同一分支层级，例如使用 %album artist%&#166%artist% 或 %&ltalbum artist&gt%&#166%&ltartist&gt%'],
							['$nodisplay{X}', '查看', "按 X 进行排序和分组，但不显示 X 本身。例如以下示例会优先显示最新专辑并展示日期：<br><input class='input75' style='font:1em Segoe UI; border:none; background:none;' value='%artist%|$nodisplay{$sub(99999,%date%)}%album%[ &#39[&#39%date%&#39]&#39]|%tracknumber%. %title%'/>"],
							['$nowplaying{X}', '过滤', '返回当前播放曲目中 X 对应的值。例如设置条件 "artist IS $nowplaying{$meta(artist,0)}" 可筛选出当前正在播放艺术家的曲目'],
							['$selected{X}', '过滤', '返回所选曲目中 X 对应的值。例如设置条件 "artist IS $selected{$meta(artist,0)}" 可筛选出当前选中艺术家的曲目'],
							['$nowplayingorselected{X}', '过滤', '返回当前播放曲目（优先）或所选曲目中 X 对应的值。即在播放时等同于 $nowplaying，未播放时等同于 $selected'],
							['$searchtext', '过滤', '将搜索框文本用于过滤条件。例如：设置过滤器 "genre HAS $searchtext" 后，搜索 “摇滚” 即筛选流派 (genre) 包含 “摇滚” 的曲目'],
							['$colour{正常,悬停,选中}', '查看', '为同一行文本中的不同部分设置独立颜色，详见下文说明']
							];
							var items = [];
							for (j = 0; j < labels.length; j++) {
								items[j] = [];
								for (i = 0; i < labels[j].length; i++) {
									items[j].push('<div class=info5;">'+labels[j][i]+'</div>');
									if (i == 2) {
										cells.push(items[j]);
									}
								}
							}
							columnCount = 3;
							// Regorxxx ->
							break;

						case 'elementColour':
							headers = ['按钮', '搜索', '分隔符', '线条', ''];
							cells.push(headers);
							var labels = ['默认', '混合', '文本', '高亮'];
							var items = [];
							for (j = 0; j < 4; j++) {
								items[j] = [];
								for (i = 0; i < menuTable.length; i++) {
									var n = menuTable[i];
									var id = n + j;
									items[j].push('<input id="'+id+'" name="'+n+'" style="'+cbox+'" type="radio" />');
									if (i == 3) {
										items[j].push('<div style="padding-left:0.46em; text-align:left">'+labels[j]+'</div>');
										cells.push(items[j]);
									}
								}
							}
							columnCount = 5;
							break;
						}
						return [cells, headers.length, columnCount];
				}

				function generateTable(tb) {
					var items = getTableData(tb);
					var cells = items[0];
					var headerCount = items[1];
					var table = document.getElementById(tb);
					var columnCount = items[2];

					//Add the header row.
					var row;
					if (headerCount) {
						row = table.insertRow(-1);
						for (i = 0; i < headerCount; i++) {
							var headerCell = document.createElement("TH");
							headerCell.innerHTML = cells[0][i];
							row.appendChild(headerCell);
						}
					}

					//Add the data rows.
					for (i = 1; i < cells.length; i++) {
						row = table.insertRow(-1);
						for (j = 0; j < columnCount; j++) {
							var cell = row.insertCell(-1);
							cell.innerHTML = cells[i][j];
							if (tb != 'syntax' && tb != 'syntaxFilter' && i % 2 == 1) cell.style.background = '#E8E8E8'; // Regorxxx <- Add help to filter tab ->
						}
					}

					if (tb == 'syntax' || tb === 'syntaxFilter') { // Regorxxx <- Add help to filter tab ->
						var els = document.getElementById(tb).getElementsByTagName("th");
						for (i = 0;i <els.length;i++){
							els[i].style.lineHeight = "1.62em";
							els[i].style.textAlign = "left";
							els[i].style.verticalAlign = "top";
							els[i].style.border = "1px solid Gainsboro";
						}
						var els = document.getElementById(tb).getElementsByTagName("td");
						for (i = 0;i <els.length;i++){
							els[i].style.lineHeight = "1.62em";
							els[i].style.textAlign = "left";
							els[i].style.verticalAlign = "top";
							els[i].style.border = "1px solid Gainsboro";
						}
					}
				}

				function setBehaviour() {
					for (i = 0; i < 3; i++) {window.actionType.insertAdjacentHTML('beforeend', '<div><input id="actionMode'+i+'" name="actionMode" style="'+cbox+'" type="radio" /><label for="actionMode'+i+'" class="checkbox_label">'+actionTypeLabels[i]+'</label></div>');}
					if (ppt['actionMode_internal'].value) {
						window.click_dropdown.innerHTML = clickLabels[0];
						window.click.insertAdjacentHTML('beforeend', '<a>预设</a>');
						window.click_dropdown.style.background = 'rgb(244, 67, 54)';
						window.dblClick_dropdown.innerHTML = dblClickLabels[0];
						window.dblClick.insertAdjacentHTML('beforeend', '<a>预设</a>');
						window.dblClick_dropdown.style.background = 'rgb(244, 67, 54)';
					} else {
						window.click_dropdown.innerHTML = clickLabels[ppt['clickAction_internal'].value];
						for (i = 0; i < 4; i++) {window.click.insertAdjacentHTML('beforeend', '<a onclick="setClickAction(' + i + ');">'+clickLabels[i]+'</a>');}
						window.dblClick_dropdown.innerHTML = dblClickLabels[ppt['dblClickAction_internal'].value];
						for (i = 0; i < 4; i++) {window.dblClick.insertAdjacentHTML('beforeend', '<a onclick="setDblClickAction(' + i + ');">'+dblClickLabels[i]+'</a>');}
					}

					if (ppt['actionMode_internal'].value == 2) {
						window.mbtnClick_dropdown.innerHTML = mbtnClickLabels[0];
						window.mbtnClick.insertAdjacentHTML('beforeend', '<a>预设</a>');
						window.mbtnClick_dropdown.style.background = 'rgb(244, 67, 54)';
					} else {
						// Regorxxx <- Top tracks
						window.mbtnClick_dropdown.innerHTML = mbtnClickLabels[ppt['mbtnClickAction_internal'].value];
						for (i = 0; i < 7; i++) {window.mbtnClick.insertAdjacentHTML('beforeend', '<a onclick="setMbtnClickAction(' + i + ');">'+mbtnClickLabels[i]+'</a>');}
						// Regorxxx ->
					}

					// Regorxxx <- Top tracks
					window.altClick_dropdown.innerHTML = altClickLabels[ppt['altClickAction_internal'].value];
					for (i = 0; i < 7; i++) {window.altClick.insertAdjacentHTML('beforeend', '<a onclick="setAltClickAction(' + i + ');">'+altClickLabels[i]+'</a>');}
					// Regorxxx ->

					window.keystroke_dropdown.innerHTML = keystrokeLabels[ppt['keyAction_internal'].value];
					for (i = 0; i < 2; i++) {window.keystroke.insertAdjacentHTML('beforeend', '<a onclick="setKeyAction(' + i + ');">'+keystrokeLabels[i]+'</a>');}

					window.sbarShow_dropdown.innerHTML = sbarShowLabels[ppt['sbarShow_internal'].value];
					for (i = 0; i < 3; i++) {window.sbarShow.insertAdjacentHTML('beforeend', '<a onclick="setSbarShow(' + i + ');" >'+sbarShowLabels[i]+'</a>');}
					window.sbarType_dropdown.innerHTML = sbarTypeLabels[ppt['sbarType_internal'].value];
					for (i = 0; i < 3; i++) {window.sbarType.insertAdjacentHTML('beforeend', '<a onclick="setsbarType(' + i + ');" >'+sbarTypeLabels[i]+'</a>');}
					window.sbarCol_dropdown.innerHTML = sbarColLabels[ppt['sbarCol_internal'].value];
					for (i = 0; i < 2; i++) {window.sbarCol.insertAdjacentHTML('beforeend', '<a onclick="setSbarCol(' + i + ');" >'+sbarColLabels[i]+'</a>');}
					sbar_col_dropdown.style.display = ppt['sbarType_internal'].value != 2 ? "inline-block" : "none";
					window.sbarIcon_dropdown.innerHTML = sbarIconLabels[ppt['sbarButType_internal'].value];
					for (i = 0; i < 3; i++) {window.sbarIcon.insertAdjacentHTML('beforeend', '<a onclick="setSbarIcon(' + i + ');" >'+sbarIconLabels[i]+'</a>');}
					sbar_icon_dropdown.style.display = ppt['sbarType_internal'].value != 2 ? "inline-block" : "none";
					for (i = 0; i < 3; i++) {window.scrolling.insertAdjacentHTML('beforeend', '<div><input id="scroll_checkbox'+i+'" name="behaviour_checkbox" style="'+cbox+'" type="checkbox" /><label for="scroll_checkbox'+i+'" class="checkbox_label">'+scrollLabels[i]+'</label></div>');}

					// Regorxxx <- Search settings to search tab ->
					for (i = 0; i < 3; i++) {window.expand.insertAdjacentHTML('beforeend', '<div><input id="expand_checkbox'+i+'" name="behaviour_checkbox" style="'+cbox+'" type="checkbox" /><label for="expand_checkbox'+i+'" class="checkbox_label">'+treeLabels[i]+'</label></div>');}
					i = 4; window.expandLimit.insertAdjacentHTML('beforeend', '<div class="input_cnt3"><input id="expand_container'+i+'" name="behaviour_input" class="input3" /></div>');
					for (i = 0; i < 2; i++) {window.selection.insertAdjacentHTML('beforeend', '<div><input id="selection_checkbox'+i+'" name="behaviour_checkbox" style="'+cbox+'" type="checkbox" /><label for="selection_checkbox'+i+'" class="checkbox_label">'+selectionLabels[i]+'</label></div>');}
					for (i = 0; i < 3; i++) {window.remember.insertAdjacentHTML('beforeend', '<div><input id="remember_checkbox'+i+'" name="behaviour_checkbox" style="'+cbox+'" type="checkbox" /><label for="remember_checkbox'+i+'" class="checkbox_label">'+rememberLabels[i]+'</label></div>');}
					// Regorxxx <- Fix follow selection checkboxes
					for (i = 0; i < 2; i++) {window.followCurrent.insertAdjacentHTML('beforeend', '<div><input id="followCurrent_checkbox'+i+'" name="behaviour_checkbox" style="'+cbox+'" type="checkbox" /><label for="followCurrent_checkbox'+i+'" class="checkbox_label">'+followCurrentLabels[i]+'</label></div>');}
					// Regorxxx ->
					// Regorxxx <- View by Folder structure sorting. Custom sorting for standard views
					window.folderSorting_dropdown.innerHTML = viewSortingLabels[ppt['folderSorting_internal'].value];
					for (i = 0; i < viewSortingLabels.length; i++) {window.folderSorting.insertAdjacentHTML('beforeend', '<a onclick="setFolderSorting(' + i + ');">' + viewSortingLabels[i] + '</a>');}
					for (i = 0; i < folderSortingFbLabels.length; i++) {window.folderSortingFb.insertAdjacentHTML('beforeend', '<div><input id="folderSortingFb_checkbox'+i+'" name="behaviour_checkbox" style="'+cbox+'" type="checkbox" /><label for="folderSortingFb_checkbox'+i+'" class="checkbox_label">' + folderSortingFbLabels[i] + '</label></div>');}
					i = 0; window.folderSortingTrans.insertAdjacentHTML('beforeend', '<div><input id="folderSortingTrans_checkbox'+i+'" name="behaviour_checkbox" style="'+cbox+'" type="checkbox" /><label for="folderSortingTrans_checkbox'+i+'" class="checkbox_label">' + sortingTransLabels[i] + '</label></div>');
					window.viewSorting_dropdown.innerHTML = viewSortingLabels[ppt['viewSorting_internal'].value];
					for (i = 0; i < viewSortingLabels.length; i++) {window.viewSorting.insertAdjacentHTML('beforeend', '<a onclick="setViewSorting(' + i + ');">' + viewSortingLabels[i] + '</a>');}
					i = 1; window.viewSortingTrans.insertAdjacentHTML('beforeend', '<div><input id="viewSortingTrans_checkbox'+i+'" name="behaviour_checkbox" style="'+cbox+'" type="checkbox" /><label for="viewSortingTrans_checkbox'+i+'" class="checkbox_label">' + sortingTransLabels[i] + '</label></div>');
					// Regorxxx ->
					i = 0; window.playlist.insertAdjacentHTML('beforeend', '<div class="input_cnt2"><label for="playlist_container'+i+'" class="inp_label1">'+playlistLabels[i]+'</label><input id="playlist_container'+i+'" name="behaviour_input" class="input75" /></div>');
					i = 1; window.playlist.insertAdjacentHTML('beforeend', '<div><input id="playlist_checkbox'+i+'" name="behaviour_checkbox" style="'+cbox+'" type="checkbox" /><label for="playlist_checkbox'+i+'" class="checkbox_label">'+playlistLabels[i]+'</label></div>');
					window.playlistSort.insertAdjacentHTML('beforeend', '<div class="input_cnt3"><label for="playlistSort_container1" class="inp_label1">'+playlistSortLabels[0]+'</label><input id="playlistSort_container1" name="behaviour_input" class="input75" /></div>');
					for (i = 0; i < 2; i++) {
						window.targetPlaylist.insertAdjacentHTML('beforeend', '<div><input id="sendToCur'+i+'" name="sendToCur" style="'+cbox+'" type="radio" /><label for="sendToCur'+i+'" class="checkbox_label">'+targetPlaylistLabels[i]+'</label></div>');
					}
					// Regorxxx <- Send to playlist & select
					i = 0; window.selectAddedToPls.insertAdjacentHTML('beforeend', '<div><input id="selectAdded_checkbox'+i+'" name="behaviour_checkbox" style="'+cbox+'" type="checkbox" /><label for="selectAdded_checkbox'+i+'" class="checkbox_label">'+selectAddedToPlsLabels[i]+'</label></div>');
					// Regorxxx ->
					// Regorxxx <- Top tracks
					i = 0; window.topTracksFilter.insertAdjacentHTML('beforeend', '<div class="input_cnt3"><label for="topTracks_container'+i+'" class="inp_label1">'+topTracksLabels[i]+'</label><input id="topTracks_container'+i+'" name="behaviour_input" class="input75" /></div>');
					i = 1; window.topTracksSorting.insertAdjacentHTML('beforeend', '<div class="input_cnt3"><label for="topTracks_container'+i+'" class="inp_label1">'+topTracksLabels[i]+'</label><input id="topTracks_container'+i+'" name="behaviour_input" class="input75" /></div>');
					// Regorxxx ->
				}

				// Regorxxx <- Drag n' drop to search box
				function setSearch() {
					window.searchSend_dropdown.innerHTML = searchLabels[ppt['searchSend_internal'].value];
					for (i = 0; i < 3; i++) {window.searchSend.insertAdjacentHTML('beforeend', '<a onclick="setSearchSend(' + i + ');">'+searchLabels[i]+'</a>');}
					i = 3; window.searchEnter.insertAdjacentHTML('beforeend', '<div><input id="search_checkbox'+i+'" name="search_checkbox" style="'+cbox+'" type="checkbox" /><label for="search_checkbox'+i+'" class="checkbox_label">'+searchLabels[i]+'</label></div>');
					i = 4; window.searchEnter.insertAdjacentHTML('beforeend', '<div><input id="search_checkbox'+i+'" name="search_checkbox" style="'+cbox+'" type="checkbox" /><label for="search_checkbox'+i+'" class="checkbox_label">'+searchLabels[i]+'</label></div>');

					window.searchDragValOpDefault_dropdown.innerHTML = dragValOpDefaultLabels[['', 'OR', 'AND'].indexOf(ppt['searchDragValOp_internal'].value.toUpperCase())];
					for (i = 0; i < 3; i++) {window.searchDragValOpDefault.insertAdjacentHTML('beforeend', '<a onclick="setDragValOpDefault(' + i + ');">'+dragValOpDefaultLabels[i]+'</a>');}

					window.searchDragValOpCtrl_dropdown.innerHTML = dragValOpCtrlLabels[['', 'OR', 'AND'].indexOf(ppt['searchDragValOpCtrl_internal'].value.toUpperCase())];
					for (i = 0; i < 3; i++) {window.searchDragValOpCtrl.insertAdjacentHTML('beforeend', '<a onclick="setDragValOpCtrl(' + i + ');">'+dragValOpCtrlLabels[i]+'</a>');}

					window.searchDragValOpAlt_dropdown.innerHTML = dragValOpAltLabels[['', 'OR', 'AND'].indexOf(ppt['searchDragValOpAlt_internal'].value.toUpperCase())];
					for (i = 0; i < 3; i++) {window.searchDragValOpAlt.insertAdjacentHTML('beforeend', '<a onclick="setDragValOpAlt(' + i + ');">'+dragValOpAltLabels[i]+'</a>');}

					window.searchDragTagOpDefault_dropdown.innerHTML = dragTagOpDefaultLabels[['', 'OR', 'AND'].indexOf(ppt['searchDragTagOp_internal'].value.toUpperCase())];
					for (i = 0; i < 3; i++) {window.searchDragTagOpDefault.insertAdjacentHTML('beforeend', '<a onclick="setDragTagOpDefault(' + i + ');">'+dragTagOpDefaultLabels[i]+'</a>');}

					window.searchDragTagOpCtrl_dropdown.innerHTML = dragTagOpCtrlLabels[['', 'OR', 'AND'].indexOf(ppt['searchDragTagOpCtrl_internal'].value.toUpperCase())];
					for (i = 0; i < 3; i++) {window.searchDragTagOpCtrl.insertAdjacentHTML('beforeend', '<a onclick="setDragTagOpCtrl(' + i + ');">'+dragTagOpCtrlLabels[i]+'</a>');}

					window.searchDragTagOpAlt_dropdown.innerHTML = dragTagOpAltLabels[['', 'OR', 'AND'].indexOf(ppt['searchDragTagOpAlt_internal'].value.toUpperCase())];
					for (i = 0; i < 3; i++) {window.searchDragTagOpAlt.insertAdjacentHTML('beforeend', '<a onclick="setDragTagOpAlt(' + i + ');">'+dragTagOpAltLabels[i]+'</a>');}

					window.searchDragTrackOpDefault_dropdown.innerHTML = dragTrackOpDefaultLabels[['', 'OR', 'AND'].indexOf(ppt['searchDragTrackOp_internal'].value.toUpperCase())];
					for (i = 0; i < 3; i++) {window.searchDragTrackOpDefault.insertAdjacentHTML('beforeend', '<a onclick="setDragTrackOpDefault(' + i + ');">'+dragTrackOpDefaultLabels[i]+'</a>');}

					window.searchDragTrackOpCtrl_dropdown.innerHTML = dragTrackOpCtrlLabels[['', 'OR', 'AND'].indexOf(ppt['searchDragTrackOpCtrl_internal'].value.toUpperCase())];
					for (i = 0; i < 3; i++) {window.searchDragTrackOpCtrl.insertAdjacentHTML('beforeend', '<a onclick="setDragTrackOpCtrl(' + i + ');">'+dragTrackOpCtrlLabels[i]+'</a>');}

					window.searchDragTrackOpAlt_dropdown.innerHTML = dragTrackOpAltLabels[['', 'OR', 'AND'].indexOf(ppt['searchDragTrackOpAlt_internal'].value.toUpperCase())];
					for (i = 0; i < 3; i++) {window.searchDragTrackOpAlt.insertAdjacentHTML('beforeend', '<a onclick="setDragTrackOpAlt(' + i + ');">'+dragTrackOpAltLabels[i]+'</a>');}

					window.searchDragQueryOpDefault_dropdown.innerHTML = dragQueryOpDefaultLabels[['', 'OR', 'AND'].indexOf(ppt['searchDragQueryOp_internal'].value.toUpperCase())];
					for (i = 0; i < 3; i++) {window.searchDragQueryOpDefault.insertAdjacentHTML('beforeend', '<a onclick="setDragQueryOpDefault(' + i + ');">'+dragQueryOpDefaultLabels[i]+'</a>');}

					window.searchDragQueryOpShift_dropdown.innerHTML = dragQueryOpShiftLabels[['', 'OR', 'AND'].indexOf(ppt['searchDragQueryOpShift_internal'].value.toUpperCase())];
					for (i = 0; i < 3; i++) {window.searchDragQueryOpShift.insertAdjacentHTML('beforeend', '<a onclick="setDragQueryOpShift(' + i + ');">'+dragQueryOpShiftLabels[i]+'</a>');}

					for (i = 0; i < 3; i++) {window.dragTags.insertAdjacentHTML('beforeend', '<div class="input_cnt5"><input id="dragTags_container'+i+'" name="search_input" class="input70" /><label for="dragTags_container'+i+'" class="inp_label2">'+dragTagsLabels[i]+'</label></div>');}
				}
				// Regorxxx ->

				// Regorxxx <- New statistics
				function setDisplay() {
					for (i = 0; i < 3; i++) {window.bar.insertAdjacentHTML('beforeend', '<div><input id="bar_checkbox'+i+'" name="display_checkbox" style="'+cbox+'" type="checkbox" /><label for="bar_checkbox'+i+'" class="checkbox_label">'+barLabels[i]+'</label></div>');}

					window.theme_dropdown.innerHTML = themeLabels[ppt['theme_internal'].value];
					for (i = 0; i < 6; i++) {window.themeBg.insertAdjacentHTML('beforeend', '<a onclick="setTheme(' + i + ');">'+themeLabels[i]+'</a>');}
					i = 6; window.themeStyle.insertAdjacentHTML('beforeend', '<div><input id="theme_checkbox'+i+'" name="display_checkbox" style="'+cbox+'" type="checkbox" /><label for="theme_checkbox'+i+'" class="checkbox_label">'+themeLabels[i]+'</label></div>');
					i = 0; window.coverFormat.insertAdjacentHTML('beforeend', '<div><input id="coverFormat_checkbox'+i+'" name="display_checkbox" style="'+cbox+'" type="checkbox" /><label for="coverFormat_checkbox'+i+'" class="checkbox_label">'+coverFormatLabels[i]+'</label></div>');
					i = 1; window.coverFormat.insertAdjacentHTML('beforeend', '<div class="input_cnt1"><input id="coverFormat_container'+i+'" name="display_input" class="input3" /><label for="coverFormat_container'+i+'" class="inp_label2">'+coverFormatLabels[i]+'</label></div>');
					i = 7; window.panelStyle.insertAdjacentHTML('beforeend', '<div><input id="theme_checkbox'+i+'" name="display_checkbox" style="'+cbox+'" type="checkbox" /><label for="theme_checkbox'+i+'" class="checkbox_label">'+themeLabels[i]+'</label></div>');
					window.lines.insertAdjacentHTML('beforeend', '<div><input id="lines_checkbox" name="display_checkbox" style="'+cbox+'" type="checkbox" /><label for="lines_checkbox" class="checkbox_label">深色</label></div>');

					for (i = 0; i < 2; i++) {window.metrics1.insertAdjacentHTML('beforeend', '<div class="input_cnt3"><input id="metrics_container'+i+'" name="display_input" style="padding:0; margin:0;" class="input3" /><label for="metrics_container'+i+'" class="inp_label2">'+metricsLabels[i]+'</label></div>');}
					for (i = 2; i < 4; i++) {window.metrics2.insertAdjacentHTML('beforeend', '<div class="input_cnt3"><input id="metrics_container'+i+'" name="display_input" style="padding:0; margin:0;" class="input3" /><label for="metrics_container'+i+'" class="inp_label2">'+metricsLabels[i]+'</label></div>');}
					for (i = 4; i < 6; i++) {window.metrics3.insertAdjacentHTML('beforeend', '<div class="input_cnt3"><input id="metrics_container'+i+'" name="display_input" style="padding:0; margin:0;" class="input3" /><label for="metrics_container'+i+'" class="inp_label2">'+metricsLabels[i]+'</label></div>')};

					window.root_dropdown.innerHTML = rootLabels[ppt['rootNode_internal'].value];
					for (i = 0; i < 4; i++) {window.root.insertAdjacentHTML('beforeend', '<a onclick="setRoot(' + i + ');">'+rootLabels[i]+'</a>');}
					i = 4; window.rootStyle.insertAdjacentHTML('beforeend', '<div><input id="root_checkbox'+i+'" name="display_checkbox" style="'+cbox+'" type="checkbox" /><label for="root_checkbox'+i+'" class="checkbox_label">'+rootLabels[i]+'</label></div>');
					i = 5; window.rootStyle.insertAdjacentHTML('beforeend', '<div><input id="root_checkbox'+i+'" name="display_checkbox" style="'+cbox+'" type="checkbox" /><label for="root_checkbox'+i+'" class="checkbox_label">'+rootLabels[i]+'</label></div>');

					window.node_dropdown.innerHTML = ppt['nodeStyle_internal'].value != 7 ? nodeLabels[ppt['nodeStyle_internal'].value] : '方框 (Windows)';
					for (i = 0; i < 7; i++) {window.node.insertAdjacentHTML('beforeend', '<a id="nodeNo'+i+'" onclick="setNode(' + i + ');">'+nodeLabels[i]+'</a>');}
					i = 7; window.nodeLines.insertAdjacentHTML('beforeend', '<div><input id="node_checkbox'+i+'" name="display_checkbox" style="'+cbox+'" type="checkbox" /><label for="node_checkbox'+i+'" class="checkbox_label">显示线条（仅限方框）</label></div>');

					window.showHl_dropdown.innerHTML = highLightLabels[ppt['highLightRow_internal'].value];
					for (i = 0; i < 4; i++) {window.showHl.insertAdjacentHTML('beforeend', '<a onclick="setHoverBg(' + i + ');">'+highLightLabels[i]+'</a>');}
					i = 0; window.frameStyle.insertAdjacentHTML('beforeend', '<div><input id="frame_checkbox'+i+'" name="display_checkbox" style="'+cbox+'" type="checkbox" /><label for="frame_checkbox'+i+'" class="checkbox_label">边框样式（专辑封面）：图像边框</label></div>');
					for (i = 4; i < 7; i++) {window.showH2.insertAdjacentHTML('beforeend', '<div><input id="showH2_checkbox'+i+'" name="display_checkbox" style="'+cbox+'" type="checkbox" /><label for="showH2_checkbox'+i+'" class="checkbox_label">'+highLightLabels[i]+'</label></div>');}
					for (i = 0; i < 7; i++) {window.show.insertAdjacentHTML('beforeend', '<div><input id="show_checkbox'+i+'" name="display_checkbox" style="'+cbox+'" type="checkbox" /><label for="show_checkbox'+i+'" class="checkbox_label">'+showLabels[i]+'</label></div>');}
				}

				function setStatistcs() {
					for (i = 0; i < 9; i++) {window.statisticsTf.insertAdjacentHTML('beforeend', '<div class="input_cnt5"><input id="statisticsTf_container'+i+'" name="statistics_input" class="input70" /><label for="statisticsTf_container'+i+'" class="inp_label2">'+statisticsLabels[i]+'</label></div>');}
					i = 0; {window.statisticsNames.insertAdjacentHTML('beforeend', '<div class="input_cnt5"><input id="statisticsNames_container'+i+'" name="statistics_input" class="input70" /><label id="statisticsNamesLabel" for="statisticsNames_container'+i+'" class="inp_label2">' + getStatisticsSlots() + '</label></div>');}

					for (i = 10; i < 12; i++) {window.labelStatistics.insertAdjacentHTML('beforeend', '<div><input id="labelStatistics_checkbox'+i+'" name="statistics_checkbox" style="'+cbox+'" type="checkbox" /><label for="labelStatistics_checkbox'+i+'" class="checkbox_label">'+statisticsLabels[i]+'</label></div>')};
					window.itemCounts_dropdown.innerHTML = itemCountsLabels[ppt['nodeCounts_internal'].value];
					i = 0; window.labelStatistics.insertAdjacentHTML('beforeend', '<div class="input_cnt3"><label id="statisticsDecimalsLabel" for="statisticsDecimals_container'+i+'" class="inp_label1">'+ statisticsDecimalsLabels[i]+'</label><input id="statisticsDecimals_container'+i+'" name="statistics_input" class="input70" /></div>');
					for (i = 0; i < 3; i++) {window.itemCounts.insertAdjacentHTML('beforeend', '<a onclick="setItemCounts(' + i + ');">'+itemCountsLabels[i]+'</a>');}
					i = 3; window.countsRight.insertAdjacentHTML('beforeend', '<div><input id="itemCounts_checkbox'+i+'" name="statistics_checkbox" style="'+cbox+'" type="checkbox" /><label for="itemCounts_checkbox'+i+'" class="checkbox_label">'+itemCountsLabels[i]+'</label></div>');
				}

				function getStatisticsSlots() {
					var customLabel = function (l) { return l.startsWith('自定义-');};
					var slots = statisticsLabels.filter(customLabel).length;
					var missing = slots - ppt['tfCustomLabels_internal'].value.split('|').length;
					return slots + ' 个标签' + (missing === 0 ? '' : '（' + (missing > 0 ? '缺少' : '多余') + ' ' + Math.abs(missing) + '个）');
				}

				function setStatisticsLabels() {
					document.getElementById('statisticsNamesLabel').innerText = getStatisticsSlots();
				}
				// Regorxxx ->

				var rootStubLabels = JSON.parse(ppt['rootImages_internal'].value) || [];
				var root_ix = ppt['curRootImg_internal'].value;

				var noArtistStubLabels = JSON.parse(ppt['noArtistImages_internal'].value) || [];
				var noart_ix = ppt['curNoArtistImg_internal'].value;

				var noCoverStubLabels = JSON.parse(ppt['noCoverImages_internal'].value) || [];
				var nocov_ix = ppt['curNoCoverImg_internal'].value;

				function setAlbumArt() {
					for (i = 0; i < 5; i++) {window.labels.insertAdjacentHTML('beforeend', '<div><input id="albumArtLabelType'+i+'" name="albumArtLabelType" style="'+cbox+'" type="radio" /><label for="albumArtLabelType'+i+'" class="checkbox_label">'+albumArtLabels[i]+'</label></div>');}
					i = 5; window.flip.insertAdjacentHTML('beforeend', '<div><input id="flip_checkbox'+i+'" name="albumart_checkbox" style="'+cbox+'" type="checkbox" /><label for="flip_checkbox'+i+'" class="checkbox_label">'+albumArtLabels[i]+'</label></div>');

					window.overlay_dropdown.innerHTML = albumArtOverlayLabels[ppt['itemOverlayType_internal'].value];
					for (i = 0; i < 3; i++) {window.overlay.insertAdjacentHTML('beforeend', '<a onclick="setOverlay(' + i + ');">'+albumArtOverlayLabels[i]+'</a>');}

					for (i = 0; i < 2; i++) {window.useCache.insertAdjacentHTML('beforeend', '<div><input id="cache_checkbox" name="albumart_checkbox" style="'+cbox+'" type="checkbox" /><label for="cache_checkbox" class="checkbox_label">'+diskCacheLabels[i]+'</label></div>');}
					var pth = '...*你的文件路径*...\\art_img\\$cut(%artist%,1)\\%artist%\\*    [请将 ...*你的文件路径*... 替换为实际路径；此模板基于简介 (Biography) 保存至默认目录的结构]';
					window.photoPath.insertAdjacentHTML('beforeend', '<div class="input_cnt1" id="view_cnt_photoPath"><input name="photoPath_view" class="input98" readonly value="'+pth+'" /></div>')

					window.rootStub_dropdown.innerHTML = '<b>所有音乐:</b> <img src="'+rootStubLabels[root_ix].path +'" alt="'+rootStubLabels[root_ix].name+'" width="'+ em +'" height="'+ em +'" class="stub"/> '+rootStubLabels[root_ix].name+'<';
					for (i = 0; i < rootStubLabels.length; i++) {window.rootStub.insertAdjacentHTML('beforeend', '<a onclick="setRootImage(' + i + ');"> <img src="'+rootStubLabels[i].path+'" alt="'+rootStubLabels[i].name+'" width="'+ em +'" height="'+ em +'" style="vertical-align:middle;"/> '+rootStubLabels[i].name+'</a>');}

					window.noArtistStub_dropdown.innerHTML = '<b>无艺术家:</b> <img src="'+noArtistStubLabels[noart_ix].path +'" alt="'+noArtistStubLabels[noart_ix].name+'" width="'+ em +'" height="'+ em +'" class="stub"/> '+noArtistStubLabels[noart_ix].name+'<';
					for (i = 0; i < noArtistStubLabels.length; i++) {window.noArtistStub.insertAdjacentHTML('beforeend', '<a onclick="setNoArtistImage(' + i + ');"> <img src="'+noArtistStubLabels[i].path+'" alt="'+noArtistStubLabels[i].name+'" width="'+ em +'" height="'+ em +'" style="vertical-align:middle;"/> '+noArtistStubLabels[i].name+'</a>');}

					window.noCoverStub_dropdown.innerHTML = '<b>无封面:</b> <img src="'+noCoverStubLabels[nocov_ix].path +'" alt="'+noCoverStubLabels[nocov_ix].name+'" width="'+ em +'" height="'+ em +'" class="stub"/> '+noCoverStubLabels[nocov_ix].name+'<';
					for (i = 0; i < noCoverStubLabels.length; i++) {window.noCoverStub.insertAdjacentHTML('beforeend', '<a onclick="setNoCoverImage(' + i + ');"> <img src="'+noCoverStubLabels[i].path+'" alt="'+noCoverStubLabels[i].name+'" width="'+ em +'" height="'+ em +'" style="vertical-align:middle;"/> '+noCoverStubLabels[i].name+'</a>');}
					generateTable('imageFormat');
					for (i = 0; i < 2; i++) {window.gap.insertAdjacentHTML('beforeend', '<div class="input_cnt3"><input id="gap_container'+i+'" name="albumart_input" style="padding:0; margin:0;" class="input15" /><label for="gap_container'+i+'" class="inp_label2">'+albumArtGapLabels[i]+'</label></div>');}
					window.flowMode.insertAdjacentHTML('beforeend', '<div><input id="flowMode_checkbox" name="albumart_checkbox" style="'+cbox+'" type="checkbox" /><label for="flowMode_checkbox" class="checkbox_label">启用</label></div>');
					window.dropShadow.insertAdjacentHTML('beforeend', '<div><input id="dropShadow_checkbox" name="albumart_checkbox" style="'+cbox+'" type="checkbox" /><label for="dropShadow_checkbox" class="checkbox_label">启用</label></div>');
					window.sameAsTree.insertAdjacentHTML('beforeend', '<div><input id="sameAsTree_checkbox" name="albumart_checkbox" style="'+cbox+'" type="checkbox" /><label for="sameAsTree_checkbox" class="checkbox_label">与树状视图相同</label></div>');

					window.thumbSize_dropdown.innerHTML = thumbnailSizeLabels[ppt['thumbNailSize_internal'].value];
					for (i = 0; i < 8; i++) {window.thumbSize.insertAdjacentHTML('beforeend', '<a onclick="setthumbSize(' + i + ');">'+thumbnailSizeLabels[i]+'</a>');}

					i = 0; window.indexLetter.insertAdjacentHTML('beforeend', '<div><input id="indexLetter_checkbox'+i+'" name="albumart_checkbox" style="'+cbox+'" type="checkbox" /><label for="indexLetter_checkbox'+i+'" class="checkbox_label">'+indexLetterLabels[i]+'</label></div>');
					i = 1; window.indexLetter.insertAdjacentHTML('beforeend', '<div class="input_cnt1"><input id="indexLetter_container'+i+'" name="albumart_input" class="input7" /><label for="indexLetter_container'+i+'" class="inp_label2">'+indexLetterLabels[i]+'</label></div>');
					i = 2; window.indexLetter.insertAdjacentHTML('beforeend', '<div><input id="indexLetter_checkbox'+i+'" name="albumart_checkbox" style="'+cbox+'" type="checkbox" /><label for="indexLetter_checkbox'+i+'" class="checkbox_label">'+indexLetterLabels[i]+'</label></div>');
				}

				var bg = [];
				var fg = [];
				function setCustomColours(value) {
					var items = ['text', 'text_h', 'textSel', 'nowp', 'search', 'txt_box', 'bg', 'bg_h', 'bgSel', 'frame', 'bgSelframe', 'counts', 'icon_c', 'icon_e', 'icon_h', 'line', 's_line', 'sideMarker', 'bgTrans'];
					for (var i= 0; i < items.length; i++) {
						bg[i] = assign(ppt[items[i] + '_internal'][value], i < 6 ? 0 : 1);
						fg[i] = getSelCol(bg[i]);
						bg[i] = "rgb("+bg[i][0]+","+bg[i][1]+","+bg[i][2]+")";
						var el = document.getElementById('colour_container'+i);
						el.style.background = bg[i];
						el.style.color = fg[i];
					}
				}

				function setCustom() {
					i = 0; window.fonts.insertAdjacentHTML('beforeend', '<div class="input_cnt1"><input id="font_checkbox'+i+'" name="custom_checkbox" style="'+cbox+'" type="checkbox" /><input id="font_container'+i+'" name="custom_input" class="input40" /><label for="font_container'+i+'" class="inp_label2">'+fontLabels[i]+'</label></div>');
					for (i = 1; i < 4; i++) {window.albumArtFonts.insertAdjacentHTML('beforeend', '<div class="input_cnt1"><input id="font_checkbox'+i+'" name="custom_checkbox" style="'+cbox+'" type="checkbox" /><input id="font_container'+i+'" name="custom_input" class="input40" /><label for="font_container'+i+'" class="inp_label2">'+fontLabels[i]+'</label></div>');}
					for (i = 0; i < 6; i++) {window.colours1.insertAdjacentHTML('beforeend', '<div class="input_cnt1"><input id="colour_checkbox'+i+'" name="custom_checkbox" style="'+cbox+'" type="checkbox" /><input id="colour_container'+i+'" name="custom_input" class="input40" /><label for="colour_container'+i+'" class="inp_label2">'+colourLabels[i]+'</label></div>');}
					for (i = 6; i < 19; i++) {window.colours2.insertAdjacentHTML('beforeend', '<div class="input_cnt1"><input id="colour_checkbox'+i+'" name="custom_checkbox" style="'+cbox+'" type="checkbox" /><input id="colour_container'+i+'" name="custom_input" class="input40" /><label for="colour_container'+i+'" class="inp_label2">'+colourLabels[i]+'</label></div>');}
				}

				function setAdvanced() {
					for (i = 0; i < 4; i++) {window.cusScroll.insertAdjacentHTML('beforeend', '<div class="input_cnt1"><input id="scroll_container'+i+'" name="advanced_input" class="input35" /><label for="scroll_container'+i+'" class="inp_label2">'+cusScrollLabels[i]+'</label></div>');}
					for (i = 0; i < 5; i++) {window.scrollbar.insertAdjacentHTML('beforeend', '<div class="input_cnt1"><input id="scrollbar_container'+i+'" name="advanced_input" class="input35" /><label for="scrollbar_container'+i+'" class="inp_label2">'+scrollbarLabels[i]+'</label></div>');}
					var fFamily = ppt['butCustIconFont_internal'].value;
					i = 5; window.scrollbar.insertAdjacentHTML('beforeend', '<div class="input_cnt1"><input id="scrollbar_container'+i+'" name="advanced_input" class="input35" style="font-family:'+fFamily+'" /><label for="scrollbar_container'+i+'" class="inp_label2">'+scrollbarLabels[i]+'</label></div>');
					for (i = 6; i < 8; i++) {window.scrollbar.insertAdjacentHTML('beforeend', '<div class="input_cnt1"><input id="scrollbar_container'+i+'" name="advanced_input" class="input35" /><label for="scrollbar_container'+i+'" class="inp_label2">'+scrollbarLabels[i]+'</label></div>');}
					i = 8; window.scrollbar.insertAdjacentHTML('beforeend', '<div><input id="scrollbar_checkbox'+i+'" name="advanced_checkbox" style="'+cbox+'" type="checkbox" /><label for="scrollbar_checkbox'+i+'" class="checkbox_label">'+scrollbarLabels[i]+'</label></div>');
					// Regorxxx <- Don't create cache playlists if possible.Chained facets updates
					for (i = 0; i < facetsLabels.length; i++) {window.facets.insertAdjacentHTML('beforeend', '<div><input id="facets_checkbox'+i+'" name="advanced_checkbox" style="'+cbox+'" type="checkbox" /><label for="facets_checkbox'+i+'" class="checkbox_label">'+facetsLabels[i]+'</label></div>');};
					// Regorxxx ->
					fFamily = ppt['custIconFont_internal'].value;
					i = 0; window.cusNode.insertAdjacentHTML('beforeend', '<div class="input_cnt1"><input id="cusNode_container'+i+'" name="advanced_input" class="input35" style="font-family:'+fFamily+'" /><label for="cusNode_container'+i+'" class="inp_label2">'+cusNodeLabels[i]+'</label></div>');
					for (i = 1; i < 3; i++) {window.cusNode.insertAdjacentHTML('beforeend', '<div class="input_cnt1"><input id="cusNode_container'+i+'" name="advanced_input" class="input35" /><label for="cusNode_container'+i+'" class="inp_label2">'+cusNodeLabels[i]+'</label></div>');}
					i = 3; window.cusNode.insertAdjacentHTML('beforeend', '<div><input id="cusNode_checkbox'+i+'" name="advanced_checkbox" style="'+cbox+'" type="checkbox" /><label for="cusNode_checkbox'+i+'" class="checkbox_label">'+cusNodeLabels[i]+'</label></div>');
					i = 0; window.themeBlur.insertAdjacentHTML('beforeend', '<div><input id="themeBlur_checkbox'+i+'" name="advanced_checkbox" style="'+cbox+'" type="checkbox" /><label for="themeBlur_checkbox'+i+'" class="checkbox_label">'+themeBlurLabels[i]+'</label></div>');
					for (i = 1; i < 3; i++) {window.themeBlur.insertAdjacentHTML('beforeend', '<div class="input_cnt1"><input id="themeBlur_container'+i+'" name="advanced_input" class="input35" /><label for="themeBlur_container'+i+'" class="inp_label2">'+themeBlurLabels[i]+'</label></div>');}
					i = 0; window.load.insertAdjacentHTML('beforeend', '<div><input id="load_checkbox'+i+'" name="advanced_checkbox" style="'+cbox+'" type="checkbox" /><label for="load_checkbox'+i+'" class="checkbox_label">'+loadLabels[i]+'</label></div>');
					i = 1; window.prefixes.insertAdjacentHTML('beforeend', '<div class="input_cnt4"><label for="prefixes_container'+i+'" class="inp_label1">'+loadLabels[i]+'</label><input id="prefixes_container'+i+'" name="advanced_input" class="inputFull" /></div>');
					i = 0; window.mode.insertAdjacentHTML('beforeend', '<div><input id="mode_checkbox'+i+'" name="advanced_checkbox" style="'+cbox+'" type="checkbox" /><label for="mode_checkbox'+i+'" class="checkbox_label">启用</label></div>');
					for (i = 0; i < 2; i++) {window.modeInput.insertAdjacentHTML('beforeend', '<div class="input_cnt1"><input id="modeInput_container'+i+'" name="advanced_input" class="input35" /><label for="modeInput_container'+i+'" class="inp_label2">'+modeLabels[i]+'</label></div>');}
					// Regorxxx <- Library profiling
					i = 0; window.logging.insertAdjacentHTML('beforeend', '<div><input id="logging_checkbox'+i+'" name="advanced_checkbox" style="'+cbox+'" type="checkbox" /><label for="logging_checkbox'+i+'" class="checkbox_label">'+loggingLabels[i]+'</label></div>');
					// Regorxxx ->
				}

				setViews();
				setFilters();
				setBehaviour();
				setSearch(); // Regorxxx <- Drag n' drop to search box ->
				setDisplay();
				setStatistcs(); // Regorxxx <- statistics tab ->
				setAlbumArt();
				setCustom();
				setAdvanced();
				setCustomColours('value');
				setCheckboxes('all', 'value');
				setInputs('all', 'value');
				setRadioBtns('all', 'value');
				generateTable('syntax');
				generateTable('syntaxFilter');  // Regorxxx <- Add help to filter tab ->

				document.getElementById("btn_delete").disabled = true;
				document.getElementById("btn_down").disabled = true;
				document.getElementById("btn_up").disabled = true;
				document.getElementById("btn_apply").disabled = true;
			}

			function setCheckboxes(page, value) {
				var checkboxes;
				if (page == 'all' || page == 'views') {
					checkboxes = document.getElementsByName('viewCheckbox');
					for (i = 0; i < checkboxes.length; i++) {
						checkboxes[i].checked = cfg[0][i].menu;
					}
				}
				if (page == 'all' || page == 'filters') {
					checkboxes = document.getElementsByName('filterCheckbox');
					for (i = 0; i < checkboxes.length; i++) {
						checkboxes[i].checked = cfg[1][i].menu;
					}
				}
				var nm = page.toString()+'_checkbox', boxes = document.querySelectorAll(page == 'all' ? "[name$='_checkbox']" : "[name="+nm+"]");
				for (i = 0; i < boxes.length; i++) {
					try { boxes[i].checked = ppt[box[page][i] + '_internal'][value]; }
					catch (e) { alert('Error on ' + nm + ' -> ' + boxes[i].id + ' -> ' + box[page][i] + '_internal (' + i + ')' ); }
				}

				if (ppt['albumArtShow_internal'][value]) {
					window.show_checkbox4.parentNode.disabled = true;
				}
				// Regorxxx <- Remember checkboxes more logic behavior
				if (!window.remember_checkbox0.checked) { window.remember_checkbox1.checked = window.remember_checkbox2.checked = false; }
				window.remember_checkbox1.parentNode.disabled = window.remember_checkbox2.parentNode.disabled = !window.remember_checkbox0.checked;
				if (window.search_checkbox3.checked) { window.search_checkbox4.checked = false; }
				window.search_checkbox4.parentNode.disabled = window.search_checkbox3.checked;
				// Regorxxx ->
				window.thumbSize_dropdown.style.visibility = window.flowMode_checkbox.checked ? 'hidden' : 'visible';
				window.thumbNailSize.style.visibility = window.flowMode_checkbox.checked ? 'hidden' : 'visible';
				window.checkbox_folderView.disabled = true;
				window.checkbox_menuName.disabled = true;
				document.getElementById("albumArtCfg").style.display = window.show_checkbox4.checked ? "block" : "none";
				window.indexLetter_checkbox2.parentNode.disabled = ppt['albumArtLetterNo_internal'].value == 0;
				window.metrics_container4.parentNode.style.display = !ppt['filterShow_internal'].value && !ppt['searchShow_internal'].value && !ppt['settingsShow_internal'].value ? "block" : "none";
			}

			function textChange(e) {
				// Regorxxx <- Remember checkboxes more logic behavior
				if (!window.remember_checkbox0.checked) { window.remember_checkbox1.checked = window.remember_checkbox2.checked = false; }
				window.remember_checkbox1.parentNode.disabled = window.remember_checkbox2.parentNode.disabled = !window.remember_checkbox0.checked;
				if (window.search_checkbox3.checked) { window.search_checkbox4.checked = false; }
				window.search_checkbox4.parentNode.disabled = window.search_checkbox3.checked;
				// Regorxxx ->
				window.theme_checkbox7.parentNode.disabled = ppt['theme_internal'].value == 1 || ppt['theme_internal'].value == 4;
				window.coverFormat_checkbox0.parentNode.disabled = ppt['theme_internal'].value != 5;
				window.coverFormat_container1.parentNode.disabled = ppt['theme_internal'].value != 5;
				window.frame_checkbox0.parentNode.disabled = ppt['highLightRow_internal'].value != 3;
				window.node_checkbox7.parentNode.disabled = ppt['nodeStyle_internal'].value != 0 && ppt['nodeStyle_internal'].value != 7;
				window.itemCounts_checkbox3.parentNode.disabled = ppt['nodeCounts_internal'].value === 0|| ppt['itemShowStatistics_internal'].value > 0; // Regorxxx <- Fix checkbox ->
				setNodeLabels();
				window.showH2_checkbox5.parentNode.disabled = window.cusNode_checkbox3.checked && (ppt['nodeStyle_internal'].value == 0 || ppt['nodeStyle_internal'].value == 7);
				document.getElementById("albumArtCfg").style.display = window.show_checkbox4.checked ? "block" : "none";
				window.albumArtLabelType2.parentNode.disabled = window.flowMode_checkbox.checked;
				window.thumbSize_dropdown.style.visibility = window.flowMode_checkbox.checked ? 'hidden' : 'visible';
				window.thumbNailSize.style.visibility = window.flowMode_checkbox.checked ? 'hidden' : 'visible';
				window.metrics_container4.parentNode.style.display = !ppt['filterShow_internal'].value && !ppt['searchShow_internal'].value && !ppt['settingsShow_internal'].value ? "block" : "none";
				clickLabels = ppt['actionMode_internal'].value == 1 ? ['发送到播放列表'] : ppt['actionMode_internal'].value == 2 ? ['选择'] : ['选择', '发送到播放列表', '发送到播放列表并播放', '发送到播放列表并播放 [添加，如果正在播放]'];
				dblClickLabels = ppt['actionMode_internal'].value == 1 ? ['发送到播放列表并播放'] : ppt['actionMode_internal'].value == 2 ? ['发送到播放队列并播放'] : ['发送到播放列表', '发送到播放列表并播放', '展开/折叠（树状视图）', '发送到播放队列并播放'];
				// Regorxxx <- Top tracks
				mbtnClickLabels = ppt['actionMode_internal'].value == 2
					? ['添加到播放队列（中键双击移除）']
					: ['添加到默认播放列表', '添加到当前播放列表', '添加到播放队列（中键双击移除）', '发送高评级音轨到默认播放列表', '发送高评级音轨到当前播放列表', '添加高评级音轨到默认播放列表', '添加高评级音轨到当前播放列表'];
				// Regorxxx ->

				if (ppt['actionMode_internal'].value) {
					window.click_dropdown.innerHTML = clickLabels[0];
					window.click.innerHTML = '';
					window.click.insertAdjacentHTML('beforeend', '<a>预设</a>');
					window.click_dropdown.style.background = 'rgb(244, 67, 54)';
					window.dblClick_dropdown.innerHTML = dblClickLabels[0];
					window.dblClick.innerHTML = '';
					window.dblClick.insertAdjacentHTML('beforeend', '<a>预设</a>');
					window.dblClick_dropdown.style.background = 'rgb(244, 67, 54)';
				} else {
					window.click_dropdown.innerHTML = clickLabels[ppt['clickAction_internal'].value];
					window.click.innerHTML = '';
					for (i = 0; i < 4; i++) {window.click.insertAdjacentHTML('beforeend', '<a onclick="setClickAction(' + i + ');">'+clickLabels[i]+'</a>');}
					window.click_dropdown.style.background = '#3e8e41';
					window.dblClick_dropdown.innerHTML = dblClickLabels[ppt['dblClickAction_internal'].value];
					window.dblClick.innerHTML = '';
					for (i = 0; i < 4; i++) {window.dblClick.insertAdjacentHTML('beforeend', '<a onclick="setDblClickAction(' + i + ');">'+dblClickLabels[i]+'</a>');}
					window.dblClick_dropdown.style.background = '#3e8e41';
				}
				if (ppt['actionMode_internal'].value == 2) {
						window.mbtnClick_dropdown.innerHTML = mbtnClickLabels[0];
						window.mbtnClick.innerHTML = '';
						window.mbtnClick.insertAdjacentHTML('beforeend', '<a>预设</a>');
						window.mbtnClick_dropdown.style.background = 'rgb(244, 67, 54)';
				} else {
					window.mbtnClick_dropdown.innerHTML = mbtnClickLabels[ppt['mbtnClickAction_internal'].value];
					window.mbtnClick.innerHTML = '';
					// Regorxxx <- Top tracks
					for (i = 0; i < 7; i++) {window.mbtnClick.insertAdjacentHTML('beforeend', '<a onclick="setMbtnClickAction(' + i + ');">'+mbtnClickLabels[i]+'</a>');}
					window.mbtnClick_dropdown.style.background = '#3e8e41';
					// Regorxxx ->
				}
			}

			setInterval(inputChanged, 500);
			function inputChanged() {
				window.indexLetter_checkbox2.parentNode.disabled = ppt['albumArtLetterNo_internal'].value == 0;
				set_btn_apply_state();
			}

			function setRadioBtns(page, value) {
				var radios = radio[page];
				for (i = 0; i < radios.length; i++) {
					var radioBtns = document.getElementsByName(radios[i]);
					var new_value = radios[i] == 'nodeStyle' && ppt[radios[i] + '_internal'][value] == 7 ? 0 : ppt[radios[i] + '_internal'][value];
					for (j = 0; j < radioBtns.length; j++) {
						if (j == new_value) {
							radioBtns[j].checked = true;
							radioBtns[j].value = j;
						}
					}
				}
				window.theme_checkbox7.parentNode.disabled = ppt['theme_internal'].value == 1 || ppt['theme_internal'].value == 4;
				window.coverFormat_checkbox0.parentNode.disabled = ppt['theme_internal'].value != 5;
				window.coverFormat_container1.parentNode.disabled = ppt['theme_internal'].value != 5;
				if (ppt['themed_internal'].value) window.themeStyle.style.display = "none";
				if (ppt['themed_internal'].value) window.coverFormat.style.display = "none";
				if (ppt['themed_internal'].value) window.panelStyle.style.display = "none";
				window.node_checkbox7.parentNode.disabled = ppt['nodeStyle_internal'].value != 0 && ppt['nodeStyle_internal'].value != 7;
				window.showH2_checkbox5.parentNode.disabled = window.cusNode_checkbox3.checked && (ppt['nodeStyle_internal'].value == 0 || ppt['nodeStyle_internal'].value == 7);

				window.albumArtLabelType2.parentNode.disabled = window.flowMode_checkbox.checked;
			}

			function setViews(clear) {
				if (clear) document.getElementById("view").innerHTML = '';
				for (i = 0; i < cfg[0].length; i++) {
					var v = cfg[0][i];
					if (i < cfg[0].length - 1) window.view.insertAdjacentHTML('beforeend', '<div class="input_cnt1" id="view_cnt'+i+'"><input name="viewCheckbox" style="'+cbox+'" type="checkbox" /><input id="view_container'+i+'" name="view_name" class="input21" /><input name="input_view" class="input71" /></div>')
					else window.view.insertAdjacentHTML('beforeend', '<div class="input_cnt1" id="view_cnt_folderView"><input id="checkbox_folderView" name="viewCheckbox" style="'+cbox+'" type="checkbox" /><input id="view_container'+i+'" name="view_name" class="input21" /><input name="input_view" class="input71" readonly /></div>')
				}
			}


			function setFilters(clear) {
				if (clear) document.getElementById("filter").innerHTML = '';
				for (i = 0; i < cfg[1].length; i++) {
					var v = cfg[1][i];
					if (i < cfg[1].length - 1) window.filter.insertAdjacentHTML('beforeend', '<div class="input_cnt1" id="filter_cnt'+i+'"><input name="filterCheckbox" style="'+cbox+'" type="checkbox" /><input id="filter_container'+i+'" name="filter_name" class="input21" /><input name="input_filter" class="input71" /></div>');
					else window.filter.insertAdjacentHTML('beforeend', '<div class="input_cnt1" id="filter_cnt_menuName"><input id="checkbox_menuName" name="filterCheckbox" style="'+cbox+'" type="checkbox" /><input id="filter_container'+i+'" name="filter_name" class="input21" /><input name="input_filter" class="input71" readonly /></div>');
				}
			}

			function getValues() {
				var v = cfg[0] = [];
				var inputs = document.getElementsByName('view_name');
				for (i = 0; i < inputs.length; i++) {
					v[i] = {}; v[i].name = inputs[i].value;
				}

				inputs = document.getElementsByName('input_view');
				for (i = 0; i < inputs.length; i++) {
					v[i].type = inputs[i].value;
				}

				var check = document.getElementsByName('viewCheckbox');
				for (i = 0; i < check.length; i++) {
					v[i].menu = check[i].checked;
				}

				v = cfg[1] = [];
				inputs = document.getElementsByName('filter_name');
				for (i = 0; i < inputs.length; i++) {
					v[i] = {}; v[i].name = inputs[i].value;
				}

				inputs = document.getElementsByName('input_filter');
				for (i = 0; i < inputs.length; i++) {
					v[i].type = inputs[i].value;
				}

				check = document.getElementsByName('filterCheckbox');
				for (i = 0; i < check.length; i++) {
					v[i].menu = check[i].checked;
				}

				inputs = document.querySelectorAll("[name$='_input']");
				for (i = 0; i < inputs.length; i++) {
					(ppt[input.all.name[i] + '_internal'] || cfg[input.all.name[i] + '_internal']).value = input.all.type[i] == 'text' ? inputs[i].value : input.all.type[i] == 'int' ? parseInt(inputs[i].value) : parseFloat(inputs[i].value);
				}

				var boxes = document.querySelectorAll("[name$='_checkbox']");
				for (i = 0; i < boxes.length; i++) {
					(ppt[box.all[i] + '_internal'] || cfg[box.all[i] + '_internal']).value = boxes[i].checked;
				}

				for (i = 0; i < radio.all.length; i++) {
					var radioBtns = document.getElementsByName(radio.all[i]);
					for (j = 0; j < radioBtns.length; j++) {
						if (radioBtns[j].checked) {
							ppt[radio.all[i] + '_internal'].value = j;
							break;
						}
					}
				}
			}

			window.btn_ok.onclick = function () {
				getValues();
				var new_cfg = JSON.stringify(cfg);
				var new_ppt = JSON.stringify(ppt);
				var new_cur = JSON.stringify(cur);
				if (new_cfg == parsed_args[0]) new_cfg = '';
				if (new_ppt == parsed_args[1]) new_ppt = '';
				if (new_cur == parsed_args[2]) new_cur = '';
				if (new_cfg || new_ppt || new_cur) {
					callback && callback(new_cfg, new_ppt, '' , new_cur);
				} else {
					if (new_cur) callback && callback('', '', '', new_cur);
				}
				close_window();
			}

			window.btn_apply.onclick = function () {
				getValues();
				var new_cfg = JSON.stringify(cfg);
				var new_ppt = JSON.stringify(ppt);
				if (new_cfg == parsed_args[0]) new_cfg = '';
				else parsed_args[0] = new_cfg;
				if (new_ppt == parsed_args[1]) new_ppt = '';
				else parsed_args[1] = new_ppt;
				// Regorxxx <- Fix errors on panel reload
				if ((new_cfg || new_ppt) && callback) {
					if (!callback(new_cfg, new_ppt)) { close_window(); }
				}
				// Regorxxx ->
			}

			function showProperties() {
				close_window();
				props_callback && props_callback();
			}

			window.btn_add.onclick = function () {
				new_id++;
				switch (cur.page) {
					case 'views':
						var list = document.getElementById("view").querySelectorAll("[id^='view_cnt']");
						if (list.length > 98) return; // no limited to 100
						list[list.length - 1].insertAdjacentHTML("beforebegin", '<div class="input_cnt1" id="view_cnt'+new_id+'"><input id="viewCheckbox'+ new_id+'" name="viewCheckbox" style="'+cbox+'" type="checkbox" /><input id="view_container'+new_id+'" name="view_name" class="input21" value="" /><input name="input_view" class="input71" value="" /></div>');
						document.getElementById("viewCheckbox" + new_id).checked = true;
						document.getElementById("view_container" + new_id).focus();
						break;
					case 'filters':
						var list = document.getElementById("filter").querySelectorAll("[id^='filter_cnt']");
						if (list.length > 98) return; // no limited to 100
						list[list.length - 1].insertAdjacentHTML("beforebegin", '<div class="input_cnt1" id="filter_cnt'+new_id+'"><input id="filterCheckbox'+ new_id+'" name="filterCheckbox" style="'+cbox+'" type="checkbox" /><input id="filter_container'+new_id+'" name="filter_name" class="input21" value="" /><input name="input_filter" class="input71" value="" /></div>');
						document.getElementById("filterCheckbox" + new_id).checked = true;
						document.getElementById("filter_container" + new_id).focus();
						break;
				}
			}

			window.btn_up.onclick = function () {
				switch (cur.page) {
					case 'views':
						if (ix.view == -1) break;
						var el = document.getElementById("view_cnt" + ix.view);
						moveUp(el);
						break;
					case 'filters':
						if (ix.filter == -1) break;
						var el = document.getElementById("filter_cnt" + ix.filter);
						moveUp(el);
						break;
				}
			}

			window.btn_down.onclick = function () {
				switch (cur.page) {
					case 'views':
						if (ix.view == -1) break;
						var el = document.getElementById("view_cnt" + ix.view);
						moveDown(el);
						break;
					case 'filters':
						if (ix.filter == -1) break;
						var el = document.getElementById("filter_cnt" + ix.filter);
						moveDown(el);
						break;
				}
			}

			window.btn_delete.onclick = function () {
				switch (cur.page) {
					case 'views':
						if (ix.view == -1) break;
						var next = document.getElementById("view_cnt" + ix.view).nextSibling;
						if (next && next.id == "view_cnt_folderView") next = document.getElementById("view_cnt" + ix.view).previousSibling;
						remove(document.getElementById("view_cnt" + ix.view));
						if (next) ix.view = next.id.replace('view_cnt', '');
						if (next) next.style["background"] = "lightgreen";
						break;
					case 'filters':
						if (ix.filter == -1) break;
						var next = document.getElementById("filter_cnt" + ix.filter).nextSibling;
						if (next && next.id == "filter_cnt_menuName") next = document.getElementById("filter_cnt" + ix.filter).previousSibling;
						remove(document.getElementById("filter_cnt" + ix.filter));
						if (next) ix.filter = next.id.replace('filter_cnt', '');
						if (next) next.style["background"] = "lightgreen";
						break;
				}
			}

			function setInputs(page, value) {
				var inputs = [];
				if (page == 'all' || page == 'views') {
					inputs = document.getElementsByName('view_name');
					for (i = 0; i < inputs.length; i++) {
						inputs[i].value = cfg[0][i].name;
					}
					inputs = document.getElementsByName('input_view');
					for (i = 0; i < inputs.length; i++) {
						inputs[i].value = cfg[0][i].type;
					}
				}

				if (page == 'all' || page == 'filters') {
					inputs = document.getElementsByName('filter_name');
					for (i = 0; i < inputs.length; i++) {
						inputs[i].value = cfg[1][i].name;
					}
					inputs = document.getElementsByName('input_filter');
					for (i = 0; i < inputs.length; i++) {
						inputs[i].value = cfg[1][i].type;
					}
				}

				var nm = page.toString()+'_input', inputs = document.querySelectorAll(page == 'all' ? "[name$='_input']" : "[name="+nm+"]");
				for (i = 0; i < inputs.length; i++) {
					try { inputs[i].value = ppt[input[page].name[i] + '_internal'][value]; }
					catch (e) { alert('Error on ' + nm + ' -> ' + inputs[i].id + ' -> ' + input[page].name[i] + '_internal (' + i + ')' ); }
				}

				window.coverFormat_container1.parentNode.disabled = ppt['theme_internal'].value != 4;
			}

			window.btn_resetPage.onclick = function () {
				var v = '';
				switch(cur.page) {
					case 'views':
						cfg[0] = [];
						for (i = 0; i < cfg[2].length; i++) {v = cfg[2][i]; cfg[0][i] = {name:v.name, type:v.type, menu:v.menu}}
						setViews(true);
						break;
					case 'filters':
						cfg[1] = [];
						for (i = 0; i < cfg[3].length; i++) {v = cfg[3][i]; cfg[1][i] = {name:v.name, type:v.type, menu:v.menu}}
						setFilters(true);
						break;
				}
				setCheckboxes(cur.page, 'default_value');
				setInputs(cur.page, 'default_value');
				setRadioBtns(cur.page, 'default_value');
				// Regorxxx <- Fix reset
				if (cur.page == 'behaviour') {
					setClickAction(ppt['clickAction_internal'].default_value);
					setDblClickAction(ppt['dblClickAction_internal'].default_value);
					setKeyAction(ppt['keyAction_internal'].default_value);
					setMbtnClickAction(ppt['mbtnClickAction_internal'].default_value)
					setAltClickAction(ppt['altClickAction_internal'].default_value)
					setSbarShow(ppt['sbarShow_internal'].default_value);
					setsbarType(ppt['sbarType_internal'].default_value);
					setSbarCol(ppt['sbarCol_internal'].default_value);
					setSbarIcon(ppt['sbarButType_internal'].default_value);
				}
				// Regorxxx ->
				// Regorxxx <- New search tab. Drag n' drop to search box
				if (cur.page == 'search') {
					setDragValOpDefault(['', 'OR', 'AND'].indexOf(ppt['searchDragValOp_internal'].default_value.toUpperCase()));
					setDragValOpCtrl(['', 'OR', 'AND'].indexOf(ppt['searchDragValOpCtrl_internal'].default_value.toUpperCase()));
					setDragValOpAlt(['', 'OR', 'AND'].indexOf(ppt['searchDragValOpAlt_internal'].default_value.toUpperCase()));
					setDragTagOpDefault(['', 'OR', 'AND'].indexOf(ppt['searchDragTagOp_internal'].default_value.toUpperCase()));
					setDragTagOpCtrl(['', 'OR', 'AND'].indexOf(ppt['searchDragTagOpCtrl_internal'].default_value.toUpperCase()));
					setDragTagOpAlt(['', 'OR', 'AND'].indexOf(ppt['searchDragTagOpAlt_internal'].default_value.toUpperCase()));
					setDragTrackOpDefault(['', 'OR', 'AND'].indexOf(ppt['searchDragTrackOp_internal'].default_value.toUpperCase()));
					setDragTrackOpCtrl(['', 'OR', 'AND'].indexOf(ppt['searchDragTrackOpCtrl_internal'].default_value.toUpperCase()));
					setDragTrackOpAlt(['', 'OR', 'AND'].indexOf(ppt['searchDragTrackOpAlt_internal'].default_value.toUpperCase()));
					setDragQueryOpDefault(['', 'OR', 'AND'].indexOf(ppt['searchDragQueryOp_internal'].default_value.toUpperCase()));
					setDragQueryOpShift(['', 'OR', 'AND'].indexOf(ppt['searchDragQueryOpShift_internal'].default_value.toUpperCase()));
					setSearchSend(ppt['searchSend_internal'].default_value);
				}
				// Regorxxx ->
				// Regorxxx <- Fix reset
				if (cur.page == 'display') {
					setTheme(ppt['theme_internal'].default_value);
					setRoot(ppt['rootNode_internal'].default_value);
					setNode(ppt['nodeStyle_internal'].default_value);
					setHoverBg(ppt['highLightRow_internal'].default_value);
				}
				// Regorxxx ->
				// Regorxxx <- New statistics tab.
				if (cur.page == 'statistics') {
					setItemCounts(ppt['nodeCounts_internal'].default_value);
				}
				// Regorxxx ->
				if (cur.page == 'albumArt') {
					// Regorxxx <- Fix stub images on reset
					window.rootStub_dropdown.innerHTML = '<b>所有音乐：</b> <img src="'+rootStubLabels[ppt.curRootImg_internal.default_value].path+'" width="'+ em +'" height="'+ em +'" class="stub"/> '+rootStubLabels[ppt.curRootImg_internal.default_value].name+'<';
					ppt.curRootImg_internal.value = ppt.curRootImg_internal.default_value;
					window.noArtistStub_dropdown.innerHTML = '<b>无艺术家：</b> <img src="'+noArtistStubLabels[ppt.curNoArtistImg_internal.default_value].path+'" width="'+ em +'" height="'+ em +'" class="stub"/> '+noArtistStubLabels[ppt.curNoArtistImg_internal.default_value].name+'<';
					ppt.curNoArtistImg_internal.value = ppt.curNoArtistImg_internal.default_value;
					window.noCoverStub_dropdown.innerHTML = '<b>无封面：</b> <img src="'+noCoverStubLabels[ppt.curNoCoverImg_internal.default_value].path+'" width="'+ em +'" height="'+ em +'" class="stub"/> '+noCoverStubLabels[ppt.curNoCoverImg_internal.default_value].name+'<';
					ppt.curNoCoverImg_internal.value = ppt.curNoCoverImg_internal.default_value;
					// Regorxxx ->
					setOverlay(ppt['itemOverlayType_internal'].default_value);
					setthumbSize(ppt['thumbNailSize_internal'].default_value);
				}
				if (cur.page == 'custom') setCustomColours('default_value');
			}

			window.btn_reset.onclick = function () {
				var msg = '此操作将把 Library Tree 的所有设置恢复至默认状态，你当前的所有配置（包括 “查看方式” 与 “过滤器” 设置）均会被清除。\n\n相关设置存储于面板属性中（支持备份功能），可通过 Shift + 右键点击 Library Tree 面板选择 “配置面板” 进行访问。\n\n确认执行重置操作？'; // Regorxxx <- Fix new lines ->
				var r = window.confirm(msg);
				if (r == true) {
					var new_cur = JSON.stringify(cur);
					if (new_cur == parsed_args[2]) new_cur = '';
					close_window();
					callback && callback('', '', 'reset', new_cur);
				}
			}

			document.onkeydown = function () {
				if (window.event.keyCode == 13 && window.btn_ok.onclick) {
					window.btn_ok.onclick();
				}
			}

			document.onkeyup = function () {
				set_btn_apply_state();
			}

			document.onclick = function () {
				var idx = document.activeElement.id;
				var clickedButton = /btn_ok|btn_add|btn_delete|btn_down|btn_up/.test(idx);
				if (!clickedButton) {
					switch (cur.page) {
						case 'views':
							var list = document.getElementById("view").querySelectorAll("[id^='view_cnt']");
							for (i= 0; i < list.length; i++) list[i].style["background"] = "none";
							var par = document.activeElement.parentElement;
							var activate = /view_cnt/.test(par.id) && !/folderView/.test(par.id);
							if (!activate) ix.view = -1;
							else {
								ix.view = par.id.replace('view_cnt', '');
								par.style["background"] = "lightgreen";
							}
							break;
						case 'filters':
							var list = document.getElementById("filter").querySelectorAll("[id^='filter_cnt']")
							for (i= 0; i < list.length; i++) list[i].style["background"] = "none";
							var par = document.activeElement.parentElement;
							var activate = /filter_cnt/.test(par.id) && !/menuName/.test(par.id);
							if (!activate) ix.filter = -1;
							else {
								ix.filter = par.id.replace('filter_cnt', '');
								par.style["background"] = "lightgreen";
							}
							break;
					}
				}
				set_btn_add_state();
				set_btn_apply_state();
				set_btn_del_state();
				set_btn_dn_state();
				set_btn_up_state();
				textChange();
				hide();
			}

			window.btn_cancel.onclick = function () {
				var new_cur = JSON.stringify(cur);
				if (new_cur == parsed_args[2]) new_cur = '';
				callback && callback('', '', '', new_cur);
				close_window();
			}

			var divToggleVis = document.getElementById('help_text');
			var help_btn = document.getElementById('help_button');

			help_btn.onclick = function() {
				if (divToggleVis.style.display === 'none') {
					divToggleVis.style.display = 'block';
					help_btn.innerHTML = '隐藏帮助';
				} else {
					divToggleVis.style.display = 'none';
					help_btn.innerHTML = '显示帮助';
				}
			}

			function showModeHelp() {
				var divToggleMode = document.getElementById('mode_text');
				if (divToggleMode.style.display === 'none') {
					divToggleMode.style.display = 'block';
					divToggleMode.scrollIntoView();
				} else {
					divToggleMode.style.display = 'none';
				}
			}

			// Regorxxx <- Drag n' drop to search box, Send to playlist & select
			function showHelp(id) { // plsSel_text, drag_text, mode_text, topTracks_text
				var divToggleMode = document.getElementById(id);
				if (divToggleMode.style.display === 'none') {
					divToggleMode.style.display = 'block';
					divToggleMode.scrollIntoView();
				} else {
					divToggleMode.style.display = 'none';
				}
			}
			// Regorxxx ->

			var divToggleSyn = document.getElementById('syntax_help');
			var syntax_btn = document.getElementById('syntax_button');

			syntax_btn.onclick = function() {
				if (divToggleSyn.style.display === 'none') {
					divToggleSyn.style.display = 'block';
					syntax_btn.innerHTML = '隐藏帮助';
				} else {
					divToggleSyn.style.display = 'none';
					syntax_btn.innerHTML = '显示多面板模式（分面）和扩展语法帮助'; // Regorxxx <- Text cleanup ->
				}
			}
			// Regorxxx <- Add help to filter tab
			var divToggleSynFilter = document.getElementById('syntaxFilter_help');
			var syntaxFilter_btn = document.getElementById('syntaxFilter_button');

			syntaxFilter_btn.onclick = function() {
				if (divToggleSynFilter.style.display === 'none') {
					divToggleSynFilter.style.display = 'block';
					syntaxFilter_btn.innerHTML = '隐藏帮助';
				} else {
					divToggleSynFilter.style.display = 'none';
					syntaxFilter_btn.innerHTML = '扩展语法帮助';
				}
			}
			// Regorxxx ->

			function toggle(item) {
				if (window[item].style.display != 'block') window[item].style.display = 'block'
				else window[item].style.display = 'none';
			}

			var h = [
				['altClick_dropdown', 'altClick'],
				['click_dropdown', 'click'],
				['dblClick_dropdown', 'dblClick'],
				['itemCounts_dropdown', 'itemCounts'],
				['mbtnClick_dropdown', 'mbtnClick'],
				['keystroke_dropdown', 'keystroke'],
				['noArtistStub_dropdown', 'noArtistStub'],
				['noCoverStub_dropdown', 'noCoverStub'],
				['node_dropdown', 'node'],
				['overlay_dropdown', 'overlay'],
				['root_dropdown', 'root'],
				['rootStub_dropdown', 'rootStub'],
				['sbarShow_dropdown', 'sbarShow'],
				['sbarType_dropdown', 'sbarType'],
				['sbarCol_dropdown', 'sbarCol'],
				['sbarIcon_dropdown', 'sbarIcon'],
				// Regorxxx <- View by Folder structure sorting. Custom sorting for standard views
				['folderSorting_dropdown', 'folderSorting'],
				['viewSorting_dropdown', 'viewSorting'],
				// Regorxxx ->
				// Regorxxx <- Drag n' drop to search box
				['searchSend_dropdown', 'searchSend'],
				['searchDragValOpDefault_dropdown', 'searchDragValOpDefault'],
				['searchDragValOpCtrl_dropdown', 'searchDragValOpCtrl'],
				['searchDragValOpAlt_dropdown', 'searchDragValOpAlt'],
				['searchDragTagOpDefault_dropdown', 'searchDragTagOpDefault'],
				['searchDragTagOpCtrl_dropdown', 'searchDragTagOpCtrl'],
				['searchDragTagOpAlt_dropdown', 'searchDragTagOpAlt'],
				['searchDragTrackOpDefault_dropdown', 'searchDragTrackOpDefault'],
				['searchDragTrackOpCtrl_dropdown', 'searchDragTrackOpCtrl'],
				['searchDragTrackOpAlt_dropdown', 'searchDragTrackOpAlt'],
				['searchDragQueryOpDefault_dropdown', 'searchDragQueryOpDefault'],
				['searchDragQueryOpShift_dropdown', 'searchDragQueryOpShift'],
				// Regorxxx ->
				['showHl_dropdown', 'showHl'],
				['theme_dropdown', 'themeBg'],
				['thumbSize_dropdown', 'thumbSize']
			];

			function hide() {
				var id = document.activeElement.id;
				for (i = 0; i < h.length; i++) {
					if (id != h[i][0]) window[h[i][1]].style.display = 'none';
				}
			}

			// Regorxxx <- Copy links to clipboard ->
			function copyToClipboard(s) {
				if (navigator.clipboard) { //Chrome
					navigator.clipboard.writeText(s);
				} else if (window.clipboardData) { // Internet Explorer
					window.clipboardData.setData("Text", s);
				}
			}

			function copyToClipboardId(id) {
				var element = document.getElementById(id);
				copyToClipboard(element.href || element.innerHTML);
			}
			// Regorxxx ->

			window.onunload = function () {
				if (!is_closed_manually) {
					var new_cur = JSON.stringify(cur);
					if (new_cur != parsed_args[2]) callback && callback('', '', '', new_cur);
				}
			}

			window.document.body.focus();
			textChange(); // Regorxxx <- Fix initial values ->
			document.getElementById("btn_ok").focus();
		</script>
	</body>
	</html>